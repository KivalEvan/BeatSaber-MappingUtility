var He=Object.defineProperty;var Ot=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var kt=(t,e,o)=>e in t?He(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,dt=(t,e)=>{for(var o in e||(e={}))Pe.call(e,o)&&kt(t,o,e[o]);if(Ot)for(var o of Ot(e))qe.call(e,o)&&kt(t,o,e[o]);return t};const De=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const g of l.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&r(g)}).observe(document,{childList:!0,subtree:!0});function o(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerpolicy&&(l.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?l.credentials="include":i.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=o(i);fetch(i.href,l)}};De();const Je=2,Ie=1,Ne=6,we="Kival Evan#5480";class Oe{constructor(){this.version=`v${Je}.${Ie}.${Ne}`,this.wm=we}get number(){return this.version}get watermark(){return this.wm}}function n(t,e=0){return e>0?Math.round(t*Math.pow(10,e))/Math.pow(10,e):Math.round(t)}function w(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}const ke=t=>t*(180/Math.PI),N=t=>t*(Math.PI/180);class Fe{constructor(e=128){this.bpm=e}set value(e){this.bpm=e}get value(){return this.bpm}}class $e{constructor(e,o=2){this._bpm=e,this._precBeat=o,this.update()}set precBeat(e){this._precBeat=e,this.update()}get precBeat(){return this._precBeat}set precTime(e){this.precBeat=1/e}get precTime(){return this._precTime}set precRealTime(e){this.precBeat=1/(this._bpm.value*e/6e4)}get precRealTime(){return this._precRealTime}set ebpmStream(e){this._ebpmStream=e,this.precBeat=this.calcBeatPrecision()}get ebpmStream(){return this._ebpmStream}set ebpmOHJ(e){this._ebpmStream=e/2,this.precBeat=this.calcBeatPrecision()}get ebpmOHJ(){return this._ebpmOHJ}update(){this._precTime=1/this._precBeat,this._precRealTime=60/this._bpm.value/this._precBeat*1e3,this._ebpmOHJ=this.calcEffectiveBPM(),this._ebpmStream=this._ebpmOHJ/2}calcEffectiveBPM(){return this._bpm.value*.5/(1/this._precBeat)}calcBeatPrecision(){return this._ebpmStream/(this._bpm.value*.25)}}const X=class{constructor(t,e=10,o=0){this._hjd=0,this._jd=0,this._jdMin=0,this._reactionTime=0,this._bpm=t,this._njs=e,this._sdm=o,this.update()}set njs(t){this._njs=t,this.update()}get njs(){return this._njs}set offset(t){this._sdm=t,this.update()}get offset(){return this._sdm}get hjd(){return this._hjd}get hjdMin(){return X.HJD_MIN}get reactTime(){return this._reactionTime}get jd(){return this._jd}get jdMin(){return this._jdMin}update(){this._hjd=this.calcHalfJumpDuration(),this._jd=this.calcJumpDistance(),this._jdMin=this.calcJumpDistance(X.HJD_MIN),this._reactionTime=this.calcReactionTimeHJD()}calcHalfJumpDurationRaw(){const e=this._njs*this._njs/this._njs,o=60/this._bpm.value;let r=X.HJD_START;for(;e*o*r>18;)r/=2;return r<1&&(r=1),r}calcHalfJumpDuration(t=this.offset){return Math.max(this.calcHalfJumpDurationRaw()+t,X.HJD_MIN)}calcHalfJumpDurationFromJD(t=this.calcJumpDistance()){return t/(60/this._bpm.value*this._njs*2)}calcHalfJumpDurationFromRT(t=this.calcReactionTimeHJD()){return t/(60/this._bpm.value)}calcJumpDistance(t=this.calcHalfJumpDuration()){return this._njs*(60/this._bpm.value)*t*2}calcJumpDistanceOptimalHigh(){return 18*(1/1.07)**this._njs+18}calcJumpDistanceOptimalLow(){return-(18/(this._njs+1))+18}calcReactionTimeJD(t=this.calcJumpDistance()){return t/(2*this._njs)}calcReactionTimeHJD(t=this.calcHalfJumpDuration()){return 60/this._bpm.value*t}};let St=X;St.HJD_START=4;St.HJD_MIN=.25;const Y={ScoreSaber:[[1,7],[.999,6.24],[.9975,5.31],[.995,4.14],[.9925,3.31],[.99,2.73],[.9875,2.31],[.985,2],[.9825,1.775],[.98,1.625],[.9775,1.515],[.975,1.43],[.9725,1.36],[.97,1.3],[.965,1.195],[.96,1.115],[.955,1.05],[.95,1],[.94,.94],[.93,.885],[.92,.835],[.91,.79],[.9,.75],[.875,.655],[.85,.57],[.825,.51],[.8,.47],[.75,.4],[.7,.34],[.65,.29],[.6,.25],[0,0]],"ScoreSaber 2020":[[1,1.5],[.99,1.39],[.98,1.29],[.97,1.2],[.96,1.115],[.95,1.046],[.945,1.015],[.9,.75],[.8,.5],[.7,.285],[.68,.24],[.65,.16],[.6,.105],[.55,.06],[.5,.03],[.45,.015],[0,0]],"ScoreSaber 2018":[[1.14,1.2],[1.1,1.15],[1,1.1],[.95,1.036],[.94,.974],[.93,.92],[.92,.885],[.91,.85],[.9,.815],[.88,.766],[.86,.72],[.845,.63],[.82,.56],[.75,.425],[.69,.25],[.5,.15],[.4,.08],[0,0]]};function Ae(t,e,o){return t+(e-t)*o}function Ge(t,e,o){return Ve((o-t)/(e-t))}function Ve(t,e=0,o=1){return Math.min(o,Math.max(e,t))}function ze(t,e){var h,M;const o=t.map(p=>p[0]),r=t.map(p=>p[1]),i=(h=[...o].reverse().find(p=>p<=e))!=null?h:o[0],l=(M=o.find(p=>p>=e))!=null?M:i,g=r[o.indexOf(i)],d=r[o.indexOf(l)],b=Ge(i,l,e)||0;return r[o.indexOf(e)]||Ae(g,d,b)}const We=115;class Zt{constructor(e=0,o=7,r=Y.ScoreSaber){this._starRating=7,this._starPP=1/1.046/.0227,this._note=e,this._starRating=o,this._curvePoints=[...r].sort((i,l)=>i[0]-l[0])}set note(e){this._note=e}get note(){return this._note}set star(e){this._starRating=e}get star(){return this._starRating}set curvePoints(e){this._curvePoints=[...e].sort((o,r)=>o[0]-r[0])}get curvePoints(){return this._curvePoints}calcPP(e=this._starRating,o=.9458064516129032){return this._starPP*e*ze(this._curvePoints,o)}calcScore(e=We,o=1,r=[],i=[]){let l=0,g=e*o,d=!0,b=0,h=1;const M=[...r].map(S=>S-1),p=[...i].map(S=>S-1);function v(){h=Math.max(h/2,1),b=0,d=!0}for(let S=0;S<this._note;S++){if(p.includes(S)&&v(),M.includes(S)){v();continue}b++,d&&b>=2*h&&(h*=2,h>=8&&(d=!1),b=0),l+=g*h}return l}}const s=new Zt(727),Ct=document.querySelector("#score-input-note"),yt=document.querySelector("#score-input-star"),q=document.querySelector("#score-input-percent"),Lt=document.querySelector("#score-input-score"),te=document.querySelector("#score-input-pp"),Xe=document.querySelector("#score-output-maxscore"),Ke=document.querySelector("#score-output-maxscore-modifier"),U=document.querySelector("#score-input-avgcut"),Rt=document.querySelector("#score-input-missed"),jt=document.querySelector("#score-input-break"),Ye=document.querySelector("#score-output-estscore"),Ue=document.querySelector("#score-output-estpercent"),Qe=document.querySelector("#score-output-estpp"),Ze=document.querySelector("#score-output-missscore"),to=document.querySelector("#score-output-nomissscore"),eo=document.querySelector("#score-output-nomisspercent"),oo=document.querySelector("#score-output-nomisspp"),Ft=document.querySelector("#score-table"),xt=document.querySelector("#score-table-percentage"),ro=document.querySelector("#score-option-pp-curve"),ct=document.querySelector("#score-text-json"),$t=document.querySelector("#score-error-json");Ct.addEventListener("change",ee);Ct.addEventListener("input",ee);yt.addEventListener("change",oe);yt.addEventListener("input",oe);q.addEventListener("change",re);q.addEventListener("input",re);Lt.addEventListener("change",ne);Lt.addEventListener("input",ne);U.addEventListener("change",ie);U.addEventListener("input",ie);jt.addEventListener("change",ce);Rt.addEventListener("change",ce);xt.addEventListener("change",co);ro.addEventListener("change",lo);ct.addEventListener("change",so);const no=[3,22,100,102],io=[127];xt.value=[100,99.5,99,98,97,96,95,94,93,90,85,80].join(",");Ct.value=s.note.toString();yt.value=s.star.toString();q.value="90";U.value="111";Rt.value=no.join(",");jt.value=io.join(",");Y.custom=[...Y.ScoreSaber];k();D();J();Mt();function ee(t){s.note=parseInt(this.value)||0,k(),D(),J(),t.type==="change"&&(this.value=s.note.toString())}function oe(t){s.star=parseFloat(this.value)||0,k(),D(),J(),t.type==="change"&&(this.value=n(s.star,2).toString())}function re(t){k(),J(),t.type==="change"&&(this.value=n(parseFloat(this.value),2).toString())}function ne(t){const e=parseInt(this.value),o=s.calcScore();q.value=n(e/o*100,2).toString(),te.value=n(s.calcPP(s.star,parseFloat(q.value)/100),2).toString(),t.type==="change"&&(this.value=e.toString())}function ie(t){D(),t.type==="change"&&(this.value=n(parseFloat(this.value),2).toString())}function ce(){const t=this.value.trim().replace(/\s+,/,",");if(/^((\d+\.)?\d+,?)+/.test(t)||t===""){const e=t.split(",").map(o=>parseInt(o)).filter(o=>!isNaN(o)).sort((o,r)=>o-r);this.value=e.join(",").toString(),D()}}function co(){const t=this.value.trim().replace(/\s+,/,",");if(/^((\d+\.)?\d+,?)+/.test(t)){const e=t.split(",").map(o=>parseFloat(o)).filter(o=>!isNaN(o)).sort((o,r)=>r-o);this.value=e.toString(),J()}}function k(){Lt.value=n(s.calcScore()*(parseFloat(q.value)/100)).toString(),te.value=n(s.calcPP(s.star,parseFloat(q.value)/100),2).toString(),Xe.textContent=w(s.calcScore()),Ke.textContent=w(s.calcScore())}function D(){const t=Rt.value.split(",").map(l=>parseInt(l))||[],e=jt.value.split(",").map(l=>parseInt(l))||[],o=s.calcScore(),r=s.calcScore(parseFloat(U.value),void 0,t,e),i=s.calcScore(parseFloat(U.value));Ye.textContent=w(n(r)),Ue.textContent=n(r/o*100,2).toString(),Qe.textContent=n(s.calcPP(s.star,r/o),2).toString(),Ze.textContent=w(n(i-r)),to.textContent=w(n(i)),eo.textContent=n(i/o*100,2).toString(),oo.textContent=n(s.calcPP(s.star,i/o),2).toString()}function J(){Ft.innerHTML="<tr><th>Percentage</th><th>Score</th><th>PP</th></tr>";const t=xt.value.split(",").map(e=>parseFloat(e));for(let e=0;e<t.length;e++){let o=document.createElement("tr"),r=document.createElement("td"),i=document.createElement("td"),l=document.createElement("td");r.textContent=n(t[e],2).toString(),i.textContent=w(n(s.calcScore()*(t[e]/100))),l.textContent=n(s.calcPP(s.star,t[e]/100),2).toString(),o.appendChild(r),o.appendChild(i),o.appendChild(l),Ft.appendChild(o)}}function lo(){s.curvePoints=Y[this.value],ct.disabled=!0,this.value==="custom"&&(ct.disabled=!1),k(),D(),J(),Mt()}function so(){let t={};$t.innerHTML="";try{/^{/.test(this.value.trim())?t=JSON.parse(this.value.trim()):t=JSON.parse(`{${this.value.trim().replace(/\,$/,"")}}`),s.curvePoints=t.curvePoints,Y.custom=t.curvePoints}catch(e){console.error(e),$t.innerHTML=e+"<br>"}k(),D(),J(),Mt()}function Mt(){const t={curvePoints:[...s.curvePoints].reverse()};ct.value=JSON.stringify(t,null,4)}class le{constructor(){this._difficulty={easy:null,normal:null,hard:null,expert:null,expertplus:null}}get difficulty(){return this._difficulty}calcDifference(e,o){return(1-this._difficulty[o]/this._difficulty[e])*100}getTotalReduction(){let e,o;for(const r in this._difficulty){const i=r;this._difficulty[i]!=null&&((!e||e<this._difficulty[i])&&(e=this._difficulty[i]),(!o||o>this._difficulty[i])&&(o=this._difficulty[i]))}return e||e&&o?(1-o/e)*100:0}}const B=new le,se={},ft={};for(const t in B.difficulty)se[t]=document.querySelector(`#sps-input-${t}`),ft[t]=document.querySelector(`#sps-output-${t}`);const ao=document.querySelector("#sps-output-total-reduction");for(const t in B.difficulty)se[t].addEventListener("input",uo);function uo(t){const e=this.id.slice(10);B.difficulty[e]=this.value?Math.abs(parseFloat(this.value.trim())):null;let o=null;for(const r in B.difficulty){const i=r;B.difficulty[i]!==null&&(o!==null&&(ft[o].textContent=`${B.difficulty[i]!==0?B.calcDifference(i,o).toFixed(2):"Infinity"}%`),o=i),ft[i].textContent=""}ao.textContent=`${B.getTotalReduction().toFixed(2)}%`,t.type==="change"&&B.difficulty[e]!==null&&(this.value=n(B.difficulty[e],2).toString())}const it=t=>[t.r,t.g,t.b],At=t=>{let e=t[0],o=t[1],r=t[2],i,l,g;return e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,i=(e*.4124+o*.3576+r*.1805)/.95047,l=(e*.2126+o*.7152+r*.0722)/1,g=(e*.0193+o*.1192+r*.9505)/1.08883,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,l=l>.008856?Math.pow(l,1/3):7.787*l+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,[116*l-16,500*(i-l),200*(l-g)]},Gt=(t,e)=>{let o=0;return t>=0&&e===0?0:t<0&&e===0?180:t===0&&e>0?90:t===0&&e<0?270:(t>0&&e>0&&(o=0),t<0&&(o=180),t>0&&e<0&&(o=360),ke(Math.atan(e/t))+o)},mt=(t,e)=>{const[o,r,i]=At(t),[l,g,d]=At(e),b=1,h=1,M=1;let p,v,S,V,gt,C,y,L,_,z,Pt,qt,Dt,Jt,It,Nt,wt,W,I,R;return p=Math.sqrt(r*r+i*i),v=Math.sqrt(g*g+d*d),S=(p+v)/2,gt=.5*(1-Math.sqrt((S^7)/((S^7)+30))),_=(1+gt)*r,p=Math.sqrt(_*_+i*i),C=Gt(_,i),_=(1+gt)*g,v=Math.sqrt(_*_+d*d),y=Gt(_,d),W=l-o,I=v-p,p*v==0?R=0:(_=n(y-C,12),Math.abs(_)<=180?R=y-C:_>180?R=y-C-360:R=y-C+360),R=2*Math.sqrt(p*v)*Math.sin(N(R/2)),z=(o+l)/2,V=(p+v)/2,p*v==0?L=C+y:(_=Math.abs(n(C-y,12)),_>180?y+C<360?L=C+y+360:L=C+y-360:L=C+y,L/=2),Pt=1-.17*Math.cos(N(L-30))+.24*Math.cos(N(2*L))+.32*Math.cos(N(3*L+6))-.2*Math.cos(N(4*L-63)),It=30*Math.exp(-((L-275)/25)*((L-275)/25)),Nt=2*Math.sqrt((V^7)/((V^7)+30)),qt=1+.015*((z-50)*(z-50))/Math.sqrt(20+(z-50)*(z-50)),Dt=1+.045*V,Jt=1+.015*V*Pt,wt=-Math.sin(N(2*It))*Nt,W=W/(b*qt),I=I/(h*Dt),R=R/(M*Jt),Math.sqrt(W*W+I*I+R*R+wt*I*R)},bt={"Default Custom":{_colorLeft:{r:.7529412,g:.1882353,b:.1882353},_colorRight:{r:.1254902,g:.3921569,b:.6588235},_envColorLeft:{r:.7529412,g:.1882353,b:.1882353},_envColorRight:{r:.1882353,g:.5960785,b:1},_obstacleColor:{r:1,g:.1882353,b:.1882353}},"The First":{_colorLeft:{r:.7843137,g:.07843138,b:.07843138},_colorRight:{r:.1568627,g:.5568627,b:.8235294},_envColorLeft:{r:.85,g:.08499997,b:.08499997},_envColorRight:{r:.1882353,g:.675294,b:1},_obstacleColor:{r:1,g:.1882353,b:.1882353}},Origins:{_colorLeft:{r:.6792453,g:.5712628,b:0},_colorRight:{r:.7075472,g:0,b:.5364411},_envColorLeft:{r:.4910995,g:.6862745,b:.7},_envColorRight:{r:.03844783,g:.6862745,b:.9056604},_obstacleColor:{r:.06167676,g:.2869513,b:.3962264}},KDA:{_colorLeft:{r:.6588235,g:.2627451,b:.1607843},_colorRight:{r:.5019608,g:.08235294,b:.572549},_envColorLeft:{r:1,g:.3960785,b:.2431373},_envColorRight:{r:.7607844,g:.1254902,b:.8666667},_obstacleColor:{r:1,g:.3960785,b:.2431373}},"Crab Rave":{_colorLeft:{r:0,g:.7130001,b:.07806564},_colorRight:{r:.04805952,g:.5068096,b:.734},_envColorLeft:{r:.134568,g:.756,b:.1557533},_envColorRight:{r:.05647058,g:.6211764,b:.9},_obstacleColor:{r:0,g:.8117648,b:.09019608}},Noir:{_colorLeft:{r:.1792453,g:.1792453,b:.1792453},_colorRight:{r:.5943396,g:.5943396,b:.5943396},_envColorLeft:{r:.4056604,g:.4056604,b:.4056604},_envColorRight:{r:.6037736,g:.6037736,b:.6037736},_obstacleColor:{r:.2358491,g:.2358491,b:.2358491}},Rocket:{_colorLeft:{r:1,g:.4980392,b:0},_colorRight:{r:0,g:.5294118,b:1},_envColorLeft:{r:.9,g:.4866279,b:.3244186},_envColorRight:{r:.4,g:.7180724,b:1},_obstacleColor:{r:.3176471,g:.6117647,b:.7254902}},"Green Day":{_colorLeft:{r:.2588235,g:.7843138,b:.01960784},_colorRight:{r:0,g:.7137255,b:.6705883},_envColorLeft:{r:0,g:.7137255,b:.6705883},_envColorRight:{r:.2588235,g:.7843137,b:.01960784},_obstacleColor:{r:0,g:.8117648,b:.09019608}},Timbaland:{_colorLeft:{r:.5019608,g:.5019608,b:.5019608},_colorRight:{r:.1,g:.5517647,b:1},_envColorLeft:{r:.1,g:.5517647,b:1},_envColorRight:{r:.1,g:.5517647,b:1},_obstacleColor:{r:.5,g:.5,b:.5}},FitBeat:{_colorLeft:{r:.8000001,g:.6078432,b:.1568628},_colorRight:{r:.7921569,g:.1607843,b:.682353},_envColorLeft:{r:.8,g:.5594772,b:.5594772},_envColorRight:{r:.5594772,g:.5594772,b:.8},_obstacleColor:{r:.2784314,g:.2784314,b:.4}},"Linkin Park":{_colorLeft:{r:.6627451,g:.1643608,b:.1690187},_colorRight:{r:.3870196,g:.5168997,b:.5568628},_envColorLeft:{r:.7529412,g:.672753,b:.5925647},_envColorRight:{r:.6241197,g:.6890281,b:.709},_envColorLeftBoost:{r:.922,g:.5957885,b:.255394},_envColorRightBoost:{r:.282353,g:.4586275,b:.6235294},_obstacleColor:{r:.6627451,g:.1647059,b:.172549}},BTS:{_colorLeft:{r:1,g:.09019607,b:.4059771},_colorRight:{r:.8018868,g:0,b:.7517689},_envColorLeft:{r:.7843137,g:.1254902,b:.5010797},_envColorRight:{r:.6941177,g:.1254902,b:.8666667},_envColorLeftBoost:{r:.9019608,g:.5411765,b:1},_envColorRightBoost:{r:.3490196,g:.8078431,b:1},_obstacleColor:{r:.6698113,g:.1800908,b:.5528399}},Kaleidoscope:{_colorLeft:{r:.65882355,g:.1254902,b:.1254902},_colorRight:{r:.28235295,g:.28235295,b:.28235295},_envColorLeft:{r:.65882355,g:.1254902,b:.1254902},_envColorRight:{r:.47058824,g:.47058824,b:.47058824},_envColorLeftBoost:{r:.50196081,g:0,b:0},_envColorRightBoost:{r:.49244517,g:0,b:.53725493},_obstacleColor:{r:.25098041,g:.25098041,b:.25098041}},Interscope:{_colorLeft:{r:.726415,g:.62691,b:.31181},_colorRight:{r:.589571,g:.297888,b:.723},_envColorLeft:{r:.724254,g:.319804,b:.913725},_envColorRight:{r:.764706,g:.758971,b:.913725},_envColorLeftBoost:{r:.792453,g:.429686,b:.429868},_envColorRightBoost:{r:.7038,g:.715745,b:.765},_obstacleColor:{r:.588235,g:.298039,b:.721569}},Skrillex:{_colorLeft:{r:.69803923,g:.14117648,b:.36862746},_colorRight:{r:.32933334,g:.32299998,b:.38},_envColorLeft:{r:.80000001,g:.28000003,b:.58594489},_envColorRight:{r:.06525807,g:.57800001,b:.56867743},_envColorLeftBoost:{r:.81176478,g:.30588236,b:.30588236},_envColorRightBoost:{r:.27843139,g:.80000001,b:.44597632},_obstacleColor:{r:.15686275,g:.60392159,b:.60392159}},"Billie Eilish":{_colorLeft:{r:.80000001,g:.64481932,b:.43200001},_colorRight:{r:.54808509,g:.61276591,b:.63999999},_envColorLeft:{r:.81960785,g:.442,b:.184},_envColorRight:{r:.94117647,g:.70677096,b:.56470591},_obstacleColor:{r:.71325314,g:.56140977,b:.78301889},_envColorLeftBoost:{r:.80000001,g:0,b:0},_envColorRightBoost:{r:.55686277,g:.7019608,b:.77647066}},Spooky:{_colorLeft:{r:.81960785,g:.49807876,b:.27702752},_colorRight:{r:.37894738,g:.35789475,b:.40000001},_envColorLeft:{r:.90196079,g:.23009226,b:0},_envColorRight:{r:.46005884,g:.56889427,b:.92941177},_obstacleColor:{r:.81960791,g:.44313729,b:.18431373},_envColorLeftBoost:{r:.33768433,g:.63207543,b:.33690813},_envColorRightBoost:{r:.60209066,g:.3280082,b:.85849059}},Gaga:{_colorLeft:{r:.85,g:.4333333,b:.7833334},_colorRight:{r:.4705882,g:.8,b:.4078431},_envColorLeft:{r:.706,g:.649,b:.2394706},_envColorRight:{r:.894,g:.1625455,b:.7485644},_obstacleColor:{r:.9921569,g:0,b:.7719755},_envColorLeftBoost:{r:.754717,g:.3610244,b:.22071921},_envColorRightBoost:{r:0,g:.7058824,b:1}},Weave:{_colorLeft:{r:.7843137,g:.07843138,b:.07843138},_colorRight:{r:.1568627,g:.5568627,b:.8235294},_envColorLeft:{r:.85,g:.08499997,b:.08499997},_envColorRight:{r:.1882353,g:.675294,b:1},_envColorLeftBoost:{r:.8218409,g:.08627451,b:.8509804},_envColorRightBoost:{r:.5320754,g:.5320754,b:.5320754},_obstacleColor:{r:1,g:.1882353,b:.1882353}},Pyro:{_colorLeft:{r:.5764706,g:0,b:.03921569},_colorRight:{r:1,g:.6705883,b:0},_envColorLeft:{r:1,g:.1098039,b:.2039216},_envColorRight:{r:.8862745,g:.7372549,b:.2627451},_envColorLeftBoost:{r:1,g:0,b:.1764706},_envColorRightBoost:{r:.7647059,g:.7647059,b:.7647059},_obstacleColor:{r:.8490566,g:.7037643,b:.4285333}},EDM:{_colorLeft:{r:.6320754,g:.6320754,b:.6320754},_colorRight:{r:.1764706,g:.6980392,b:.8784314},_envColorLeft:{r:.08220173,g:.7169812,b:0},_envColorRight:{r:0,g:.3671638,b:.7169812},_envColorLeftBoost:{r:.735849,g:0,b:.1758632},_envColorRightBoost:{r:.4284593,g:0,b:.754717},_obstacleColor:{r:.1764706,g:.6980392,b:.8784314}},"The Second":{_colorLeft:{r:.7843137,g:.07843138,b:.07843138},_colorRight:{r:.1568627,g:.5568627,b:.8235294},_envColorLeft:{r:.85,g:.08499997,b:.08499997},_envColorRight:{r:.1882353,g:.675294,b:1},_envColorLeftBoost:{r:.8235294,g:.08627451,b:.8509804},_envColorRightBoost:{r:0,g:1,b:.6478302},_obstacleColor:{r:1,g:.1882353,b:.1882353}},Lizzo:{_colorLeft:{r:1,g:.8132076,b:.3773585},_colorRight:{r:.6705883,g:.254902,b:.8980392},_envColorLeft:{r:.8392157,g:.6470588,b:.2156863},_envColorRight:{r:.8196079,g:.2392157,b:.8784314},_envColorLeftBoost:{r:1,g:.4,b:.5529412},_envColorRightBoost:{r:.3686275,g:.7960784,b:1},_obstacleColor:{r:1,g:.5020987,b:.1882353}},"The Weeknd":{_colorLeft:{r:.5843138,g:.1294118,b:.1294118},_colorRight:{r:.2235294,g:.2901961,b:.3294118},_envColorLeft:{r:1,g:.2979701,b:.1411765},_envColorRight:{r:.1668743,g:.3753689,b:.7075472},_envColorLeftBoost:{r:.9568628,g:.6039216,b:.1215686},_envColorRightBoost:{r:.5254902,g:.8274511,b:.9921569},_obstacleColor:{r:.9176471,g:.2980392,b:.007843138}},"Rock Mixtape":{_colorLeft:{r:.6,g:.4233,b:.042},_colorRight:{r:.6006,g:.7441199,b:.78},_envColorLeft:{r:.75,g:.12,b:.162},_envColorRight:{r:.95,g:.5820333,b:.1615},_envColorLeftBoost:{r:.96,g:.1344,b:.9187202},_envColorRightBoost:{r:.378,g:.813,b:.9},_obstacleColor:{r:1,g:1,b:1}},"Dragons 2.0":{_colorLeft:{r:.7264151,g:.6587077,b:.2809719},_colorRight:{r:.2509804,g:.7647059,b:.405098},_envColorLeft:{r:.01960784,g:.9960785,b:.06666667},_envColorRight:{r:0,g:.05490196,b:1},_envColorLeftBoost:{r:.9764706,g:.03137255,b:.01960784},_envColorRightBoost:{r:1,g:.8292086,b:.2264151},_obstacleColor:{r:.5548979,g:.2470588,b:1}},"Panic 2.0":{_colorLeft:{r:.9019608,g:.3333333,b:.5686275},_colorRight:{r:.1529412,g:.5568628,b:.4862745},_envColorLeft:{r:.6980392,g:.1137255,b:.372549},_envColorRight:{r:.1882353,g:.6196079,b:.6235294},_envColorLeftBoost:{r:.9019608,g:.4470589,b:.06666667},_envColorRightBoost:{r:.6365692,g:.4373443,b:.8584906},_obstacleColor:{r:.9686275,g:.3803922,b:.2745098}},"Glass Desert":{_colorLeft:{r:.6792453,g:.5712628,b:0},_colorRight:{r:.7075472,g:0,b:.5364411},_envColorLeft:{r:.32222217,g:.6111111,b:.75},_envColorRight:{r:.03844783,g:.62239975,b:.90566039},_obstacleColor:{r:.06167676,g:.2869513,b:.3962264}}},po={"New World":{_colorLeft:{r:.625,g:.625,b:.625},_colorRight:{r:.34375,g:.4375,b:.625},_envColorLeft:{r:.21875,g:.28125,b:.46875},_envColorRight:{r:.5,g:.5625,b:.78125},_obstacleColor:{r:.625,g:.59375,b:.8125}},"Girly Cupid":{_colorLeft:{r:1,g:.1875,b:.1875},_colorRight:{r:.375,g:.5625,b:.875},_envColorLeft:{r:.375,g:.375,b:.375},_envColorRight:{r:.625,g:.75,b:.875},_obstacleColor:{r:.75,g:.75,b:.75}},"T.R.Y Revolution":{_colorLeft:{r:1,g:0,b:.375},_colorRight:{r:.125,g:.375,b:.90625},_envColorLeft:{r:1,g:.125,b:.375},_envColorRight:{r:.1875,g:.5625,b:1},_obstacleColor:{r:.625,g:.625,b:.625}},Frightmare:{_colorLeft:{r:.8125,g:.125,b:.125},_colorRight:{r:.625,g:.625,b:.625},_envColorLeft:{r:.625,g:.03215,b:.03215},_envColorRight:{r:.71875,g:.71875,b:.71875},_obstacleColor:{r:.1875,g:.1875,b:.1875}},"Azure Raindrop":{_colorLeft:{r:.8125,g:.125,b:.125},_colorRight:{r:.0625,g:.5,b:.875},_envColorLeft:{r:.5625,g:.5625,b:.5625},_envColorRight:{r:.0625,g:.5,b:.875},_obstacleColor:{r:.75,g:.25,b:.75}},"werewolf howls.":{_colorLeft:{r:.812,g:.125,b:.125},_colorRight:{r:.25,g:.5,b:.75},_envColorLeft:{r:.875,g:.062,b:.062},_envColorRight:{r:.375,g:.375,b:.375},_envColorLeftBoost:{r:.938,g:.062,b:.062},_envColorRightBoost:{r:.938,g:.438,b:0},_obstacleColor:{r:.25,g:.25,b:.25}},VENTEN:{_colorLeft:{r:.8125,g:.625,b:.375},_colorRight:{r:.625,g:.375,b:.875},_envColorLeft:{r:.78125,g:.625,b:.1875},_envColorRight:{r:.09375,g:.4375,b:.6875},_envColorLeftBoost:{r:.875,g:.0625,b:.375},_envColorRightBoost:{r:.1875,g:.5,b:.875},_obstacleColor:{r:.125,g:.25,b:.4375}},"Unconscious Requiem":{_colorLeft:{r:.312,g:.312,b:.312},_colorRight:{r:.419,g:.625,b:.213},_envColorLeft:{r:.85,g:.085,b:.085},_envColorRight:{r:.604,g:.604,b:.604},_envColorLeftBoost:{r:.922,g:.596,b:.255},_envColorRightBoost:{r:.259,g:.784,b:.02},_obstacleColor:{r:.5,g:.5,b:.5}},"Pure-Hearted Armeria":{_colorLeft:{r:.25,g:.25,b:.25},_colorRight:{r:.625,g:.625,b:.625},_envColorLeft:{r:.25,g:.562,b:.312},_envColorRight:{r:.562,g:.562,b:.562},_obstacleColor:{r:.25,g:.5,b:.375},_envColorLeftBoost:{r:.625,g:.188,b:.188},_envColorRightBoost:{r:.125,g:.312,b:.688}}},vt=class{constructor(t="Default Custom"){this._environmentColor=t,this._colorScheme={_colorLeft:null,_colorRight:null,_envColorLeft:null,_envColorRight:null,_envColorLeftBoost:null,_envColorRightBoost:null,_obstacleColor:null},this.update()}get colorScheme(){return this._colorScheme}get environmentColor(){return this._environmentColor}set environmentColor(t){this._environmentColor=t,this.update()}update(){if(vt.list[this._environmentColor])for(const t in this._colorScheme){const e=t;this._colorScheme[e]=vt.list[this._environmentColor][e]||null}}getColorHex(t){return t==null?"#000000":this.rgbaToHex(t)}decToHex(t){let e=t.toString(16);return e.length===1?"0"+e:e}hexToDec(t){return parseInt(t,16)}cDenorm(t){return t>1&&!(t<0)?255:n(t*255)}cNorm(t){return t/255}rgbaToHex(t){let e={r:0,g:0,b:0};for(const o in t){const r=o;typeof t[r]=="number"&&(e[r]=this.cDenorm(t[r]))}return`#${this.decToHex(e.r)}${this.decToHex(e.g)}${this.decToHex(e.b)}`}hexToRGB(t){return{r:this.cNorm(this.hexToDec(t.slice(1,3))),g:this.cNorm(this.hexToDec(t.slice(3,5))),b:this.cNorm(this.hexToDec(t.slice(5,7)))}}};let P=vt;P.list=bt;const a=new P,O=document.querySelector("#cp-option-colorscheme"),ho=document.querySelector("#cp-show-custom"),T={},E={},H={},x={};for(const t in a.colorScheme){const e=t.replace(/^\_/,"").toLowerCase();T[t]=document.querySelector(`#cp-input-hex-${e}`),E[t]=document.querySelector(`#cp-input-picker-${e}`),H[t]=document.querySelector(`#cp-input-include-${e}`),x[t]=document.querySelector(`#cp-input-reset-${e}`)}const Vt=document.querySelector("#cp-output-de-nc"),zt=document.querySelector("#cp-output-de-la"),Wt=document.querySelector("#cp-output-de-ra"),ae=document.querySelector("#cp-io-colorjson"),Xt=document.querySelector("#cp-error-colorjson");O.addEventListener("change",mo);for(const t in a.colorScheme)T[t].addEventListener("change",bo),E[t].addEventListener("change",vo),H[t].addEventListener("click",_o),x[t].addEventListener("click",So),x[t].style.display="none";const Bt="Custom";let j=document.createElement("option");j.value=Bt;j.textContent=Bt;O.append(j);for(const t in P.list)j=document.createElement("option"),j.value=t,j.textContent=t,O.append(j);ho.addEventListener("change",go);function go(){for(let t=O.options.length-1;t>=0;t--)O.remove(t);P.list=bt,this.checked&&(P.list=dt(dt({},bt),po));for(const t in P.list)j=document.createElement("option"),j.value=t,j.textContent=t,O.append(j)}ae.addEventListener("change",fo);function mo(){if(this.value!==Bt){for(const t in a.colorScheme)T[t].value="",E[t].value="#000000",H[t].checked=!1,x[t].style.display="none";a.environmentColor=this.value;for(const t in a.colorScheme){const e=t;if(a.colorScheme[e]){const o=a.getColorHex(a.colorScheme[e]);T[e].value=o,E[e].value=o,H[e].checked=!!a.colorScheme[e],x[e].style.display="block"}}F(),$()}}function fo(){for(const o in a.colorScheme)T[o].value="",E[o].value="#000000",H[o].checked=!1,x[o].style.display="none";Xt.innerHTML="";const t=["_colorLeft","_colorRight","_envColorLeft","_envColorRight","_envColorLeftBoost","_envColorRightBoost","_obstacleColor"];let e={};try{/^{/.test(this.value.trim())?e=JSON.parse(this.value.trim()):e=JSON.parse(`{${this.value.trim().replace(/\,$/,"")}}`)}catch(o){console.error(o),Xt.innerHTML=o+"<br>"}for(const o in e){const r=o;if(t.includes(r)){a.colorScheme[r]=e[r];const i=a.getColorHex(e[r]);T[r].value=i,E[r].value=i,H[r].checked=!0,x[r].style.display="block"}}F(),$()}function F(){const t=a.colorScheme._colorLeft,e=a.colorScheme._colorRight,o=[1,1,1];t?zt.textContent=n(mt(it(t),o),2).toString():zt.textContent="N/A",e?Wt.textContent=n(mt(it(e),o),2).toString():Wt.textContent="N/A",t&&e?Vt.textContent=n(mt(it(t),it(e)),2).toString():Vt.textContent="N/A"}function $(){const t={};for(const e in a.colorScheme){const o=e;H[o].checked&&(t[o]=a.colorScheme[o])}ae.value=JSON.stringify(t,null,4)}function bo(){if(/^\#?[0-9a-fA-F]{6,8}/.test(this.value.trim())){let t=`_${this.id.slice(13)}`;for(const o in a.colorScheme)t===o.toLowerCase()&&(t=o);const e=this.value.trim().replace(/^\#?/,"#").slice(0,7);a.colorScheme[t]=a.hexToRGB(e),T[t].value=e,E[t].value=e,H[t].checked=!0,x[t].style.display="block",F(),$()}}function vo(){let t=`_${this.id.slice(16)}`;for(const e in a.colorScheme)t===e.toLowerCase()&&(t=e);a.colorScheme[t]=a.hexToRGB(this.value),T[t].value=this.value,H[t].checked=!0,x[t].style.display="block",F(),$()}function _o(){let t=`_${this.id.slice(17)}`;for(const e in a.colorScheme)t===e.toLowerCase()&&(t=e);this.checked&&(a.colorScheme[t]=a.hexToRGB(E[t].value),T[t].value=E[t].value,x[t].style.display="block"),F(),$()}function So(){let t=`_${this.id.slice(15)}`;for(const e in a.colorScheme)t===e.toLowerCase()&&(t=e);a.colorScheme[t]=null,T[t].value="",E[t].value="#000000",H[t].checked=!1,x[t].style.display="none",F(),$()}const K={0:"noter.svg",1:"noteb.svg",2:"bomb.png",3:"noterd.svg",4:"notebd.svg",blank:"blank.png"},Kt={0:"",1:"deg180",2:"deg270",3:"deg90",4:"deg315",5:"deg45",6:"deg225",7:"deg135",8:""};class ue{constructor(e,o){this._maxIndex=o,this._maxLayer=e}set column(e){this._maxIndex=e}get column(){return this._maxIndex}set row(e){this._maxLayer=e}get row(){return this._maxLayer}set limit(e){this._limit=e}get limit(){return this._limit}set total(e){this._total=e}get total(){return this._total}set noteRed(e){this._noteRed=e}get noteRed(){return this._noteRed}set noteBlue(e){this._noteBlue=e}get noteBlue(){return this._noteBlue}set noteBomb(e){this._noteBomb=e}get noteBomb(){return this._noteBomb}set noDot(e){this._noDot=e}get noDot(){return this._noDot}set parity(e){this._parity=e}get parity(){return this._parity}set parityExtend(e){this._parityExtend=e}get parityExtend(){return this._parityExtend}set parityRed(e){this._parityRed=e}get parityRed(){return this._parityRed}set parityBlue(e){this._parityBlue=e}get parityBlue(){return this._parityBlue}createValidParity(e=0,o=!1){const r={0:{0:[6,1,7],1:[4,0,5],2:[0,1,2,3,4,5,6,7,8],3:[0,1,2,3,4,5,6,7,8]},1:{0:[6,1,7],1:[4,0,5],2:[0,1,2,3,4,5,6,7,8],3:[0,1,2,3,4,5,6,7,8]}};return o&&(r[0][0].push(8),r[0][1].push(8),r[1][0].push(8),r[1][1].push(8)),e>0&&(r[0][0].push(3),r[0][1].push(2),r[1][0].push(2),r[1][1].push(3)),e>1&&(r[0][0].push(5),r[0][1].push(6),r[1][0].push(4),r[1][1].push(7)),e>2&&(r[0][0].push(0,2),r[0][1].push(1,3),r[1][0].push(0,3),r[1][1].push(1,2)),r}generate(){let e=2;const o=[this._noteRed,this._noteBlue,this._noteBomb],r={0:this._parityRed?0:1,1:this._parityBlue?0:1},i=this.createValidParity(this._parityExtend,!this._noDot),l=this._maxIndex*this._maxLayer;this._limit&&(e=Math.min(this._total,o.reduce((d,b)=>d+b),l)),this._limit||(e=Math.min(o.reduce((d,b)=>d+b),l));const g=new Array(l).fill(null);if(e===0)return g;for(let d=0;d<e;){let b=Math.floor(Math.random()*l),h=Math.floor(Math.random()*3);for(let p=0;p<3;p++)o[h]===0&&(h=(h+1)%3);if(o[h]===0)break;let M=Math.floor(Math.random()*9);this._parity&&h<=1&&(M=i[h][r[h]][Math.floor(Math.random()*i[h][r[h]].length)]);for(let p=0;p<l;p++){let v=(b+p)%l;if(g[v]===null){h===2&&(M=0),g[v]={_noteType:h,_noteDirection:M},o[h]--,d++;break}}}return g}}const m=new ue(3,4),pe=document.querySelector("#rpg-input-rpattern-row"),he=document.querySelector("#rpg-input-rpattern-column"),Yt=document.querySelector("#rpg-table-rpattern"),ge=document.querySelector("#rpg-input-rpattern-red"),de=document.querySelector("#rpg-input-rpattern-blue"),me=document.querySelector("#rpg-input-rpattern-bomb"),Co=document.querySelector("#rpg-input-rpattern-limit"),fe=document.querySelector("#rpg-input-rpattern-total"),Ut=document.querySelector("#rpg-input-rpattern-nodot"),yo=document.querySelector("#rpg-input-rpattern-parity"),be=document.querySelector("#rpg-input-rpattern-parity-extend"),Lo=document.querySelector("#rpg-input-rpattern-parity-red"),Ro=document.querySelector("#rpg-input-rpattern-parity-blue"),jo=document.querySelector("#rpg-input-generate-rpattern");pe.addEventListener("click",xo);he.addEventListener("click",Mo);jo.addEventListener("click",Bo);pe.value=m.row.toString();he.value=m.column.toString();ge.value="1";de.value="1";me.value="0";fe.value="2";be.value="0";Tt();function Tt(){Yt.innerHTML="";for(let t=0;t<m.row;t++){let e=document.createElement("tr");for(let o=0;o<m.column;o++){let r=document.createElement("td");r.className="table-grid";let i=document.createElement("img");i.className="table-rpattern-image",i.src=`./assets/${K.blank}`,i.alt=K.blank.slice(0,-4),r.appendChild(i),e.appendChild(r)}Yt.appendChild(e)}}function xo(){const t=Math.min(Math.abs(parseFloat(this.value))||1,4);this.value=t.toString(),m.row=t,Tt()}function Mo(){const t=Math.min(Math.abs(parseFloat(this.value))||1,8);this.value=t.toString(),m.column=t,Tt()}function Bo(){const t=document.querySelectorAll(".table-rpattern-image");t.forEach(o=>{o.src="./assets/blank.png",o.alt="blank",o.className="table-rpattern-image"}),m.noteRed=parseInt(ge.value)||0,m.noteBlue=parseInt(de.value)||0,m.noteBomb=parseInt(me.value)||0,m.noDot=Ut.checked,m.limit=Co.checked,m.total=parseInt(fe.value)||0,m.parity=yo.checked,m.parityExtend=parseInt(be.value)||0,m.parityRed=Lo.checked,m.parityBlue=Ro.checked;const e=m.generate();for(let o=0;o<e.length;o++)e[o]!==null&&(t[o].src=`./assets/${e[o]._noteDirection!==8||Ut.checked?K[e[o]._noteType]:K[e[o]._noteType+3]}`,t[o].alt=K[e[o]._noteType].slice(0,-4),e[o]._noteDirection!==8&&(t[o].className+=` ${Kt[e[o]._noteDirection]}`,t[o].alt+=` ${Kt[e[o]._noteDirection]}`))}const f=new Fe,c=new St(f,16),u=new $e(f);new Zt(727);new le;new P;new ue(3,4);const ve=new Oe,To=document.querySelectorAll(".text-version"),Eo=document.querySelectorAll(".text-watermark"),Et=document.querySelector("#map-settings-input-bpm"),_e=document.querySelectorAll(".toggle-input"),Q=document.querySelector("#ebpm-input-precbeat"),Z=document.querySelector("#ebpm-input-prectime"),A=document.querySelector("#ebpm-input-precrealtime"),lt=document.querySelector("#ebpm-input-ebpm-ohj"),st=document.querySelector("#ebpm-input-ebpm-stream"),at=document.querySelector("#njs-input-njs"),G=document.querySelector("#njs-input-offset"),tt=document.querySelector("#njs-input-hjd"),et=document.querySelector("#njs-input-jd"),ot=document.querySelector("#njs-input-reacttime"),ut=document.querySelector("#njs-output-jd"),Se=document.querySelector("#njs-output-reacttime"),Ho=document.querySelector("#njs-output-jd-optimal-high"),Po=document.querySelector("#njs-output-jd-optimal-low"),qo=document.querySelector("#njs-output-reverse-staircase"),Do=document.querySelector("#njs-output-reverse-staircase-time"),Jo=document.querySelector("#njs-output-reverse-staircase-diagonal"),Io=document.querySelector("#njs-output-reverse-staircase-diagonal-time"),No=document.querySelector("#njs-output-inline"),wo=document.querySelector("#njs-output-inline-time"),Qt=document.querySelector("#njs-option-njs-scale"),Oo=document.querySelector("#label-input-text"),_t=document.querySelector("#label-output-text"),ko=document.querySelector("#label-input-diff-count-1"),Fo=document.querySelector("#label-input-diff-count-2"),$o=document.querySelector("#label-input-diff-count-3"),Ao=document.querySelector("#label-input-diff-count-4"),Go=document.querySelector("#label-input-diff-count-5");Et.addEventListener("change",ye);Et.addEventListener("input",ye);Q.addEventListener("change",Le);Q.addEventListener("input",Le);Z.addEventListener("change",Re);Z.addEventListener("input",Re);A.addEventListener("change",je);A.addEventListener("input",je);lt.addEventListener("change",pt);lt.addEventListener("input",pt);st.addEventListener("change",pt);st.addEventListener("input",pt);at.addEventListener("change",xe);at.addEventListener("input",xe);G.addEventListener("change",Me);G.addEventListener("input",Me);tt.addEventListener("change",Be);tt.addEventListener("input",Be);et.addEventListener("change",Te);et.addEventListener("input",Te);ot.addEventListener("change",Ee);ot.addEventListener("input",Ee);Oo.addEventListener("input",Xo);ko.addEventListener("click",nt);Fo.addEventListener("click",nt);$o.addEventListener("click",nt);Ao.addEventListener("click",nt);Go.addEventListener("click",nt);Vo(ve.number);zo(ve.watermark);Et.value=f.value.toString();rt();Ht();at.value=c.njs.toString();G.value=c.offset.toString();ht();Se.textContent=`${n(60/f.value*c.hjdMin*1e3)}ms`;Ce();function Vo(t){To.forEach(e=>{e.textContent=t})}function zo(t){Eo.forEach(e=>{e.textContent=t})}function Ce(){_e.forEach(t=>{t.disabled=!1})}function Wo(){_e.forEach(t=>{t.disabled=!0})}function ye(t){f.value=Math.abs(parseFloat(this.value))||0,f.value>0?(u.update(),Ce(),Ht(),rt(),ht(),Se.textContent=`${n(60/f.value*c.hjdMin*1e3)}ms`):Wo(),t.type==="change"&&(this.value=f.value.toString())}function Le(t){u.precBeat=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):1,u.precBeat>0&&(rt(),Z.value=n(u.precTime,3).toString(),A.value=n(u.precRealTime,1).toString()),t.type==="change"&&(this.value=n(u.precBeat,3).toString())}function Re(t){u.precTime=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):1,u.precTime>0&&(rt(),Q.value=n(u.precBeat,3).toString(),A.value=n(u.precRealTime,1).toString()),t.type==="change"&&(this.value=n(u.precTime,3).toString())}function je(t){u.precRealTime=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):1,u.precRealTime>0&&(rt(),Q.value=n(u.precBeat,3).toString(),Z.value=n(u.precTime,3).toString()),t.type==="change"&&(A.value=n(u.precRealTime,1).toString())}function pt(t){this.id==="ebpm-input-ebpm-ohj"&&(u.ebpmOHJ=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):f.value,t.type==="change"&&(this.value=n(u.ebpmOHJ,2).toString()),st.value=n(u.ebpmStream,2).toString()),this.id==="ebpm-input-ebpm-stream"&&(u.ebpmStream=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):f.value,t.type==="change"&&(this.value=n(u.ebpmStream,2).toString()),lt.value=n(u.ebpmOHJ,2).toString()),Ht()}function Ht(){Q.value=n(u.precBeat,3).toString(),Z.value=n(u.precTime,3).toString(),A.value=n(u.precRealTime,1).toString()}function rt(){lt.value=n(u.ebpmOHJ,2).toString(),st.value=n(u.ebpmStream,2).toString()}function xe(t){c.njs=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):c.njs,ht(),t.type==="change"&&(this.value=n(c.njs,3).toString())}function Me(t){c.offset=parseFloat(this.value)||0,ht(),t.type==="change"&&(this.value=n(c.offset,3).toString())}function Be(t){c.offset=Math.max(Math.abs(parseFloat(this.value)),c.hjdMin)-c.calcHalfJumpDurationRaw(),G.value=n(c.offset,3).toString(),et.value=n(c.jd,3).toString(),ot.value=n(c.reactTime*1e3).toString(),ut.textContent=n(c.jdMin,2).toString(),t.type==="change"&&(this.value=n(c.hjd,3).toString())}function Te(t){let e=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):c.jd;Qt.value==="hjd"&&(e=Math.max(e,c.jdMin),c.offset=c.calcHalfJumpDurationFromJD(e)-c.calcHalfJumpDurationRaw()),Qt.value==="njs"&&(c.njs=e/(2*c.calcReactionTimeHJD())),tt.value=n(c.hjd,3).toString(),ot.value=n(c.reactTime*1e3).toString(),ut.textContent=n(c.jdMin,2).toString(),at.value=n(c.njs,3).toString(),G.value=n(c.offset,3).toString(),t.type==="change"&&(this.value=n(c.jd,2).toString())}function Ee(t){let e=Math.max(Math.abs(parseFloat(this.value))/1e3>0?Math.abs(parseFloat(this.value))/1e3:c.calcReactionTimeHJD(),c.calcReactionTimeHJD(c.hjdMin));c.offset=e/(60/f.value)-c.calcHalfJumpDurationRaw(),tt.value=n(c.hjd,3).toString(),et.value=n(c.jd,2).toString(),ut.textContent=n(c.jdMin,2).toString(),G.value=n(c.offset,3).toString(),t.type==="change"&&(this.value=n(c.reactTime*1e3).toString())}function ht(){c.update(),tt.value=n(c.hjd,3).toString(),et.value=n(c.jd,2).toString(),ot.value=n(c.reactTime*1e3).toString(),Ho.textContent=n(c.calcJumpDistanceOptimalHigh(),2).toString(),Po.textContent=n(c.calcJumpDistanceOptimalLow(),2).toString(),qo.textContent=n((1.425/c.njs-.0216882353)*(f.value/60),3).toString(),Do.textContent=n(1/((1.425/c.njs-.0216882353)*(f.value/60)),1).toString(),Jo.textContent=n((1.425/c.njs-.03414823529)*(f.value/60),3).toString(),Io.textContent=n(1/((1.425/c.njs-.03414823529)*(f.value/60)),1).toString(),No.textContent=n(1.425/c.njs*(f.value/60),3).toString(),wo.textContent=n(1/(1.425/c.njs*(f.value/60)),1).toString(),ut.textContent=n(c.jdMin,2).toString()}function Xo(){this.value.trim()!==""?_t.textContent=this.value.trim():_t.textContent="none"}function nt(){_t.className=`diff-label diff-count-${parseInt(this.value)}`}
