(()=>{"use strict";const e=function(){function e(){this.version="v2.0.3",this.wm="Kival Evan#5480"}return Object.defineProperty(e.prototype,"number",{get:function(){return this.version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"watermark",{get:function(){return this.wm},enumerable:!1,configurable:!0}),e}();function t(e,t){return void 0===t&&(t=0),t>0?Math.round(e*Math.pow(10,t))/Math.pow(10,t):Math.round(e)}function r(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var o=function(){function e(e){void 0===e&&(e=128),this.bpm=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.bpm},set:function(e){this.bpm=e},enumerable:!1,configurable:!0}),e}();const n=o;var i=function(){function e(e,t){void 0===t&&(t=2),this._bpm=e,this._precBeat=t,this.update()}return Object.defineProperty(e.prototype,"precBeat",{get:function(){return this._precBeat},set:function(e){this._precBeat=e,this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"precTime",{get:function(){return this._precTime},set:function(e){this.precBeat=1/e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"precRealTime",{get:function(){return this._precRealTime},set:function(e){this.precBeat=1/(this._bpm.value*e/6e4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ebpmStream",{get:function(){return this._ebpmStream},set:function(e){this._ebpmStream=e,this.precBeat=this.calcBeatPrecision()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ebpmOHJ",{get:function(){return this._ebpmOHJ},set:function(e){this._ebpmStream=e/2,this.precBeat=this.calcBeatPrecision()},enumerable:!1,configurable:!0}),e.prototype.update=function(){this._precTime=1/this._precBeat,this._precRealTime=60/this._bpm.value/this._precBeat*1e3,this._ebpmOHJ=this.calcEffectiveBPM(),this._ebpmStream=this._ebpmOHJ/2},e.prototype.calcEffectiveBPM=function(){return.5*this._bpm.value/(1/this._precBeat)},e.prototype.calcBeatPrecision=function(){return this._ebpmStream/(.25*this._bpm.value)},e}();const a=i;var c=function(){function e(e,t,r){void 0===t&&(t=10),void 0===r&&(r=0),this._bpm=e,this._njs=t,this._sdm=r,this.update()}return Object.defineProperty(e.prototype,"njs",{get:function(){return this._njs},set:function(e){this._njs=e,this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._sdm},set:function(e){this._sdm=e,this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hjd",{get:function(){return this._hjd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hjdMin",{get:function(){return e.HJD_MIN},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reactTime",{get:function(){return this._reactionTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"jd",{get:function(){return this._jd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"jdMin",{get:function(){return this._jdMin},enumerable:!1,configurable:!0}),e.prototype.update=function(){this._hjd=this.calcHalfJumpDuration(),this._jd=this.calcJumpDistance(),this._jdMin=this.calcJumpDistance(e.HJD_MIN),this._reactionTime=this.calcReactionTimeHJD()},e.prototype.calcHalfJumpDurationRaw=function(){for(var t=this._njs*this._njs/this._njs,r=60/this._bpm.value,o=e.HJD_START;t*r*o>18;)o/=2;return o<1&&(o=1),o},e.prototype.calcHalfJumpDuration=function(t){return void 0===t&&(t=this.offset),Math.max(this.calcHalfJumpDurationRaw()+t,e.HJD_MIN)},e.prototype.calcHalfJumpDurationFromJD=function(e){return void 0===e&&(e=this.calcJumpDistance()),e/(60/this._bpm.value*this._njs*2)},e.prototype.calcHalfJumpDurationFromRT=function(e){return void 0===e&&(e=this.calcReactionTimeHJD()),e/(60/this._bpm.value)},e.prototype.calcJumpDistance=function(e){return void 0===e&&(e=this.calcHalfJumpDuration()),this._njs*(60/this._bpm.value)*e*2},e.prototype.calcJumpDistanceOptimalHigh=function(){return 18*Math.pow(1/1.07,this._njs)+18},e.prototype.calcJumpDistanceOptimalLow=function(){return-18/(this._njs+1)+18},e.prototype.calcReactionTimeJD=function(e){return void 0===e&&(e=this.calcJumpDistance()),e/(2*this._njs)},e.prototype.calcReactionTimeHJD=function(e){return void 0===e&&(e=this.calcHalfJumpDuration()),60/this._bpm.value*e},e.HJD_START=4,e.HJD_MIN=.25,e}();const l=c;var u={scoresaber:[[1.14,1.2],[1.1,1.15],[1,1.1],[.95,1.036],[.94,.974],[.93,.92],[.92,.885],[.91,.85],[.9,.815],[.88,.766],[.86,.72],[.845,.63],[.82,.56],[.75,.425],[.69,.25],[.5,.15],[.4,.08],[0,0]],exponential:[[1,8],[.99,4],[.98,2],[.97,1.5],[.96,1.1],[.95,1.036],[.94,.974],[.93,.92],[.92,.885],[.91,.85],[.9,.815],[.88,.766],[.86,.72],[.845,.63],[.82,.56],[.75,.425],[.69,.25],[.5,.15],[.4,.08],[0,0]]},s=function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};const p=function(){function e(e,t,r){void 0===e&&(e=0),void 0===t&&(t=7),void 0===r&&(r=u.scoresaber),this._starRating=7,this._starPP=42.521,this._note=e,this._starRating=t,this._curvePoints=s([],r,!0).sort((function(e,t){return e[0]-t[0]}))}return Object.defineProperty(e.prototype,"note",{get:function(){return this._note},set:function(e){this._note=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"star",{get:function(){return this._starRating},set:function(e){this._starRating=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curvePoints",{get:function(){return this._curvePoints},set:function(e){this._curvePoints=s([],e,!0).sort((function(e,t){return e[0]-t[0]}))},enumerable:!1,configurable:!0}),e.prototype.calcPP=function(e,t){return void 0===e&&(e=this._starRating),void 0===t&&(t=.9458064516129032),this._starPP*e*(r=this._curvePoints,o=t,c=r.map((function(e){return e[0]})),l=r.map((function(e){return e[1]})),u=null!==(n=s([],c,!0).reverse().find((function(e){return e<=o})))&&void 0!==n?n:c[0],p=null!==(i=c.find((function(e){return e>=o})))&&void 0!==i?i:u,h=l[c.indexOf(u)],f=l[c.indexOf(p)],g=function(e,t,r){return function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),Math.min(r,Math.max(t,e))}((r-e)/(t-e))}(u,p,o)||0,l[c.indexOf(o)]||(a=h)+(f-a)*g);var r,o,n,i,a,c,l,u,p,h,f,g},e.prototype.calcScore=function(e,t,r,o){void 0===e&&(e=115),void 0===t&&(t=1),void 0===r&&(r=[]),void 0===o&&(o=[]);var n=0,i=e*t,a=!0,c=0,l=1,u=s([],r,!0).map((function(e){return e-1})),p=s([],o,!0).map((function(e){return e-1}));function h(){l=Math.max(l/2,1),c=0,a=!0}for(var f=0;f<this._note;f++)p.includes(f)&&h(),u.includes(f)?h():(c++,a&&c>=2*l&&((l*=2)>=8&&(a=!1),c=0),n+=i*l);return n},e}();var h=function(){function e(){this._difficulty={easy:null,normal:null,hard:null,expert:null,expertplus:null}}return Object.defineProperty(e.prototype,"difficulty",{get:function(){return this._difficulty},enumerable:!1,configurable:!0}),e.prototype.calcDifference=function(e,t){return 100*(1-this._difficulty[t]/this._difficulty[e])},e.prototype.getTotalReduction=function(){var e=null,t=null;for(var r in this._difficulty)null!==this._difficulty[r]&&((!e||e<this._difficulty[r])&&(e=this._difficulty[r]),(!t||t>this._difficulty[r])&&(t=this._difficulty[r]));return e||e&&t?100*(1-t/e):0},e}();const f=h;var g={"Default Custom":{_colorLeft:{r:.7529412,g:.1882353,b:.1882353},_colorRight:{r:.1254902,g:.3921569,b:.6588235},_envColorLeft:{r:.7529412,g:.1882353,b:.1882353},_envColorRight:{r:.1882353,g:.5960785,b:1},_obstacleColor:{r:1,g:.1882353,b:.1882353}},"The First":{_colorLeft:{r:.7843137,g:.07843138,b:.07843138},_colorRight:{r:.1568627,g:.5568627,b:.8235294},_envColorLeft:{r:.85,g:.08499997,b:.08499997},_envColorRight:{r:.1882353,g:.675294,b:1},_obstacleColor:{r:1,g:.1882353,b:.1882353}},Origins:{_colorLeft:{r:.6792453,g:.5712628,b:0},_colorRight:{r:.7075472,g:0,b:.5364411},_envColorLeft:{r:.4910995,g:.6862745,b:.7},_envColorRight:{r:.03844783,g:.6862745,b:.9056604},_obstacleColor:{r:.06167676,g:.2869513,b:.3962264}},KDA:{_colorLeft:{r:.6588235,g:.2627451,b:.1607843},_colorRight:{r:.5019608,g:.08235294,b:.572549},_envColorLeft:{r:1,g:.3960785,b:.2431373},_envColorRight:{r:.7607844,g:.1254902,b:.8666667},_obstacleColor:{r:1,g:.3960785,b:.2431373}},"Crab Rave":{_colorLeft:{r:0,g:.7130001,b:.07806564},_colorRight:{r:.04805952,g:.5068096,b:.734},_envColorLeft:{r:.134568,g:.756,b:.1557533},_envColorRight:{r:.05647058,g:.6211764,b:.9},_obstacleColor:{r:0,g:.8117648,b:.09019608}},Noir:{_colorLeft:{r:.1792453,g:.1792453,b:.1792453},_colorRight:{r:.5943396,g:.5943396,b:.5943396},_envColorLeft:{r:.4056604,g:.4056604,b:.4056604},_envColorRight:{r:.6037736,g:.6037736,b:.6037736},_obstacleColor:{r:.2358491,g:.2358491,b:.2358491}},Rocket:{_colorLeft:{r:1,g:.4980392,b:0},_colorRight:{r:0,g:.5294118,b:1},_envColorLeft:{r:.9,g:.4866279,b:.3244186},_envColorRight:{r:.4,g:.7180724,b:1},_obstacleColor:{r:.3176471,g:.6117647,b:.7254902}},"Green Day":{_colorLeft:{r:.2588235,g:.7843138,b:.01960784},_colorRight:{r:0,g:.7137255,b:.6705883},_envColorLeft:{r:0,g:.7137255,b:.6705883},_envColorRight:{r:.2588235,g:.7843137,b:.01960784},_obstacleColor:{r:0,g:.8117648,b:.09019608}},Timbaland:{_colorLeft:{r:.5019608,g:.5019608,b:.5019608},_colorRight:{r:.1,g:.5517647,b:1},_envColorLeft:{r:.1,g:.5517647,b:1},_envColorRight:{r:.1,g:.5517647,b:1},_obstacleColor:{r:.5,g:.5,b:.5}},FitBeat:{_colorLeft:{r:.8000001,g:.6078432,b:.1568628},_colorRight:{r:.7921569,g:.1607843,b:.682353},_envColorLeft:{r:.8,g:.5594772,b:.5594772},_envColorRight:{r:.5594772,g:.5594772,b:.8},_obstacleColor:{r:.2784314,g:.2784314,b:.4}},"Linkin Park":{_colorLeft:{r:.6627451,g:.1643608,b:.1690187},_colorRight:{r:.3870196,g:.5168997,b:.5568628},_envColorLeft:{r:.7529412,g:.672753,b:.5925647},_envColorRight:{r:.6241197,g:.6890281,b:.709},_envColorLeftBoost:{r:.922,g:.5957885,b:.255394},_envColorRightBoost:{r:.282353,g:.4586275,b:.6235294},_obstacleColor:{r:.6627451,g:.1647059,b:.172549}},BTS:{_colorLeft:{r:1,g:.09019607,b:.4059771},_colorRight:{r:.8018868,g:0,b:.7517689},_envColorLeft:{r:.7843137,g:.1254902,b:.5010797},_envColorRight:{r:.6941177,g:.1254902,b:.8666667},_envColorLeftBoost:{r:.9019608,g:.5411765,b:1},_envColorRightBoost:{r:.3490196,g:.8078431,b:1},_obstacleColor:{r:.6698113,g:.1800908,b:.5528399}},Kaleidoscope:{_colorLeft:{r:.65882355,g:.1254902,b:.1254902},_colorRight:{r:.28235295,g:.28235295,b:.28235295},_envColorLeft:{r:.65882355,g:.1254902,b:.1254902},_envColorRight:{r:.47058824,g:.47058824,b:.47058824},_envColorLeftBoost:{r:.50196081,g:0,b:0},_envColorRightBoost:{r:.49244517,g:0,b:.53725493},_obstacleColor:{r:.25098041,g:.25098041,b:.25098041}},Interscope:{_colorLeft:{r:.726415,g:.62691,b:.31181},_colorRight:{r:.589571,g:.297888,b:.723},_envColorLeft:{r:.724254,g:.319804,b:.913725},_envColorRight:{r:.764706,g:.758971,b:.913725},_envColorLeftBoost:{r:.792453,g:.429686,b:.429868},_envColorRightBoost:{r:.7038,g:.715745,b:.765},_obstacleColor:{r:.588235,g:.298039,b:.721569}},Skrillex:{_colorLeft:{r:.69803923,g:.14117648,b:.36862746},_colorRight:{r:.32933334,g:.32299998,b:.38},_envColorLeft:{r:.80000001,g:.28000003,b:.58594489},_envColorRight:{r:.06525807,g:.57800001,b:.56867743},_envColorLeftBoost:{r:.81176478,g:.30588236,b:.30588236},_envColorRightBoost:{r:.27843139,g:.80000001,b:.44597632},_obstacleColor:{r:.15686275,g:.60392159,b:.60392159}},"Billie Eilish":{_colorLeft:{r:.80000001,g:.64481932,b:.43200001},_colorRight:{r:.54808509,g:.61276591,b:.63999999},_envColorLeft:{r:.81960785,g:.442,b:.184},_envColorRight:{r:.94117647,g:.70677096,b:.56470591},_obstacleColor:{r:.71325314,g:.56140977,b:.78301889},_envColorLeftBoost:{r:.80000001,g:0,b:0},_envColorRightBoost:{r:.55686277,g:.7019608,b:.77647066}},"Glass Desert":{_colorLeft:{r:.6792453,g:.5712628,b:0},_colorRight:{r:.7075472,g:0,b:.5364411},_envColorLeft:{r:.32222217,g:.6111111,b:.75},_envColorRight:{r:.03844783,g:.62239975,b:.90566039},_obstacleColor:{r:.06167676,g:.2869513,b:.3962264}},"New World":{_colorLeft:{r:.625,g:.625,b:.625},_colorRight:{r:.34375,g:.4375,b:.625},_envColorLeft:{r:.21875,g:.28125,b:.46875},_envColorRight:{r:.5,g:.5625,b:.78125},_obstacleColor:{r:.625,g:.59375,b:.8125}},"Girly Cupid":{_colorLeft:{r:1,g:.1875,b:.1875},_colorRight:{r:.375,g:.5625,b:.875},_envColorLeft:{r:.375,g:.375,b:.375},_envColorRight:{r:.625,g:.75,b:.875},_obstacleColor:{r:.75,g:.75,b:.75}},"T.R.Y Revolution":{_colorLeft:{r:1,g:0,b:.375},_colorRight:{r:.125,g:.375,b:.90625},_envColorLeft:{r:1,g:.125,b:.375},_envColorRight:{r:.1875,g:.5625,b:1},_obstacleColor:{r:.625,g:.625,b:.625}},Frightmare:{_colorLeft:{r:.8125,g:.125,b:.125},_colorRight:{r:.625,g:.625,b:.625},_envColorLeft:{r:.625,g:.03215,b:.03215},_envColorRight:{r:.71875,g:.71875,b:.71875},_obstacleColor:{r:.1875,g:.1875,b:.1875}},"Azure Raindrop":{_colorLeft:{r:.8125,g:.125,b:.125},_colorRight:{r:.0625,g:.5,b:.875},_envColorLeft:{r:.5625,g:.5625,b:.5625},_envColorRight:{r:.0625,g:.5,b:.875},_obstacleColor:{r:.75,g:.25,b:.75}},"werewolf howls.":{_colorLeft:{r:.812,g:.125,b:.125},_colorRight:{r:.25,g:.5,b:.75},_envColorLeft:{r:.875,g:.062,b:.062},_envColorRight:{r:.375,g:.375,b:.375},_envColorLeftBoost:{r:.938,g:.062,b:.062},_envColorRightBoost:{r:.938,g:.438,b:0},_obstacleColor:{r:.25,g:.25,b:.25}},VENTEN:{_colorLeft:{r:.8125,g:.625,b:.375},_colorRight:{r:.625,g:.375,b:.875},_envColorLeft:{r:.78125,g:.625,b:.1875},_envColorRight:{r:.09375,g:.4375,b:.6875},_envColorLeftBoost:{r:.875,g:.0625,b:.375},_envColorRightBoost:{r:.1875,g:.5,b:.875},_obstacleColor:{r:.125,g:.25,b:.4375}},"Unconscious Requiem":{_colorLeft:{r:.312,g:.312,b:.312},_colorRight:{r:.419,g:.625,b:.213},_envColorLeft:{r:.85,g:.085,b:.085},_envColorRight:{r:.604,g:.604,b:.604},_envColorLeftBoost:{r:.922,g:.596,b:.255},_envColorRightBoost:{r:.259,g:.784,b:.02},_obstacleColor:{r:.5,g:.5,b:.5}},"Pure-Hearted Armeria":{_colorLeft:{r:.25,g:.25,b:.25},_colorRight:{r:.625,g:.625,b:.625},_envColorLeft:{r:.25,g:.562,b:.312},_envColorRight:{r:.562,g:.562,b:.562},_obstacleColor:{r:.25,g:.5,b:.375},_envColorLeftBoost:{r:.625,g:.188,b:.188},_envColorRightBoost:{r:.125,g:.312,b:.688}}},d=function(){function e(e){void 0===e&&(e="Default Custom"),this._environmentColor=e,this._colorScheme={_colorLeft:null,_colorRight:null,_envColorLeft:null,_envColorRight:null,_envColorLeftBoost:null,_envColorRightBoost:null,_obstacleColor:null},this.update()}return Object.defineProperty(e.prototype,"colorScheme",{get:function(){return this._colorScheme},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"environmentColor",{get:function(){return this._environmentColor},set:function(e){this._environmentColor=e,this.update()},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(g[this._environmentColor])for(var e in this._colorScheme)this._colorScheme[e]=g[this._environmentColor][e]||null},e.prototype.getColorHex=function(e){return null==e?"#000000":this.rgbaToHex(e)},e.prototype.decToHex=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},e.prototype.hexToDec=function(e){return parseInt(e,16)},e.prototype.cDenorm=function(e){return e>1&&!(e<0)?255:t(255*e)},e.prototype.cNorm=function(e){return e/255},e.prototype.rgbaToHex=function(e){var t={r:null,g:null,b:null};for(var r in e)t[r]=this.cDenorm(e[r]);return"#"+this.decToHex(t.r)+this.decToHex(t.g)+this.decToHex(t.b)+(void 0!==t.a?this.decToHex(t.a):"")},e.prototype.hexToRGB=function(e){return{r:this.cNorm(this.hexToDec(e.slice(1,3))),g:this.cNorm(this.hexToDec(e.slice(3,5))),b:this.cNorm(this.hexToDec(e.slice(5,7)))}},e}();const v=d;var b={0:"noter.svg",1:"noteb.svg",2:"bomb.png",3:"noterd.svg",4:"notebd.svg",blank:"blank.png"},m={0:"",1:"deg180",2:"deg270",3:"deg90",4:"deg315",5:"deg45",6:"deg225",7:"deg135",8:""};const _=function(){function e(e,t){this._maxIndex=t,this._maxLayer=e}return Object.defineProperty(e.prototype,"column",{get:function(){return this._maxIndex},set:function(e){this._maxIndex=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"row",{get:function(){return this._maxLayer},set:function(e){this._maxLayer=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"limit",{get:function(){return this._limit},set:function(e){this._limit=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"total",{get:function(){return this._total},set:function(e){this._total=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noteRed",{get:function(){return this._noteRed},set:function(e){this._noteRed=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noteBlue",{get:function(){return this._noteBlue},set:function(e){this._noteBlue=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noteBomb",{get:function(){return this._noteBomb},set:function(e){this._noteBomb=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noDot",{get:function(){return this._noDot},set:function(e){this._noDot=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parity",{get:function(){return this._parity},set:function(e){this._parity=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parityExtend",{get:function(){return this._parityExtend},set:function(e){this._parityExtend=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parityRed",{get:function(){return this._parityRed},set:function(e){this._parityRed=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parityBlue",{get:function(){return this._parityBlue},set:function(e){this._parityBlue=e},enumerable:!1,configurable:!0}),e.prototype.createValidParity=function(e,t){void 0===e&&(e=0),void 0===t&&(t=!1);var r={0:{0:[6,1,7],1:[4,0,5],2:[0,1,2,3,4,5,6,7,8],3:[0,1,2,3,4,5,6,7,8]},1:{0:[6,1,7],1:[4,0,5],2:[0,1,2,3,4,5,6,7,8],3:[0,1,2,3,4,5,6,7,8]}};return t&&(r[0][0].push(8),r[0][1].push(8),r[1][0].push(8),r[1][1].push(8)),e>0&&(r[0][0].push(3),r[0][1].push(2),r[1][0].push(2),r[1][1].push(3)),e>1&&(r[0][0].push(5),r[0][1].push(6),r[1][0].push(4),r[1][1].push(7)),e>2&&(r[0][0].push(0,2),r[0][1].push(1,3),r[1][0].push(0,3),r[1][1].push(1,2)),r},e.prototype.generate=function(){var e=2,t=[this._noteRed,this._noteBlue,this._noteBomb],r={0:this._parityRed?0:1,1:this._parityBlue?0:1},o=this.createValidParity(this._parityExtend,!this._noDot),n=this._maxIndex*this._maxLayer;this._limit&&(e=Math.min(this._total,t.reduce((function(e,t){return e+t})),n)),this._limit||(e=Math.min(t.reduce((function(e,t){return e+t})),n));var i=new Array(n).fill(null);if(0===e)return i;for(var a=0;a<e;){for(var c=Math.floor(Math.random()*n),l=Math.floor(3*Math.random()),u=0;u<3;u++)0===t[l]&&(l=(l+1)%3);if(0===t[l])break;var s=Math.floor(9*Math.random());for(this._parity&&l<=1&&(s=o[l][r[l]][Math.floor(Math.random()*o[l][r[l]].length)]),u=0;u<n;u++){var p=(c+u)%n;if(null===i[p]){2===l&&(s=0),i[p]={_noteType:l,_noteDirection:s},t[l]--,a++;break}}}return i},e}();var y=function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},S=new n,C=new l(S,16),L=new a(S),R=new p(727),j=new f,x=new v,E=new _(3,4),q=new e,P=document.querySelectorAll(".text-version"),M=document.querySelectorAll(".text-watermark"),B=document.querySelector("#map-settings-input-bpm"),T=document.querySelectorAll(".toggle-input"),D=document.querySelector("#ebpm-input-precbeat"),O=document.querySelector("#ebpm-input-prectime"),H=document.querySelector("#ebpm-input-precrealtime"),J=document.querySelector("#ebpm-input-ebpm-ohj"),k=document.querySelector("#ebpm-input-ebpm-stream"),F=document.querySelector("#njs-input-njs"),w=document.querySelector("#njs-input-offset"),N=document.querySelector("#njs-input-hjd"),I=document.querySelector("#njs-input-jd"),A=document.querySelector("#njs-input-reacttime"),G=document.querySelector("#njs-output-jd"),K=document.querySelector("#njs-output-reacttime"),V=document.querySelector("#njs-output-jd-optimal-high"),$=document.querySelector("#njs-output-jd-optimal-low"),z=document.querySelector("#njs-option-njs-scale"),U=document.querySelector("#score-input-note"),W=document.querySelector("#score-input-star"),Y=document.querySelector("#score-input-percent"),Q=document.querySelector("#score-input-score"),X=document.querySelector("#score-input-pp"),Z=document.querySelector("#score-output-maxscore"),ee=document.querySelector("#score-output-maxscore-modifier"),te=document.querySelector("#score-input-avgcut"),re=document.querySelector("#score-input-missed"),oe=document.querySelector("#score-input-break"),ne=document.querySelector("#score-output-estscore"),ie=document.querySelector("#score-output-estpercent"),ae=document.querySelector("#score-output-estpp"),ce=document.querySelector("#score-output-missscore"),le=document.querySelector("#score-output-nomissscore"),ue=document.querySelector("#score-output-nomisspercent"),se=document.querySelector("#score-output-nomisspp"),pe=document.querySelector("#score-table"),he=document.querySelector("#score-table-percentage"),fe=document.querySelector("#score-option-pp-curve"),ge=document.querySelector("#score-text-json"),de=document.querySelector("#score-error-json"),ve=document.querySelector("#label-input-text"),be=document.querySelector("#label-output-text"),me=document.querySelector("#label-input-diff-count-1"),_e=document.querySelector("#label-input-diff-count-2"),ye=document.querySelector("#label-input-diff-count-3"),Se=document.querySelector("#label-input-diff-count-4"),Ce=document.querySelector("#label-input-diff-count-5"),Le={},Re={};for(var je in j.difficulty)Le[je]=document.querySelector("#sps-input-"+je),Re[je]=document.querySelector("#sps-output-"+je);var xe=document.querySelector("#sps-output-total-reduction"),Ee=document.querySelector("#cp-option-colorscheme"),qe={},Pe={},Me={},Be={};for(var Te in x.colorScheme){var De=Te.replace(/^\_/,"").toLowerCase();qe[Te]=document.querySelector("#cp-input-hex-"+De),Pe[Te]=document.querySelector("#cp-input-picker-"+De),Me[Te]=document.querySelector("#cp-input-include-"+De),Be[Te]=document.querySelector("#cp-input-reset-"+De)}var Oe=document.querySelector("#cp-io-colorjson"),He=document.querySelector("#cp-error-colorjson"),Je=document.querySelector("#rpg-input-rpattern-row"),ke=document.querySelector("#rpg-input-rpattern-column"),Fe=document.querySelector("#rpg-table-rpattern"),we=document.querySelector("#rpg-input-rpattern-red"),Ne=document.querySelector("#rpg-input-rpattern-blue"),Ie=document.querySelector("#rpg-input-rpattern-bomb"),Ae=document.querySelector("#rpg-input-rpattern-limit"),Ge=document.querySelector("#rpg-input-rpattern-total"),Ke=document.querySelector("#rpg-input-rpattern-nodot"),Ve=document.querySelector("#rpg-input-rpattern-parity"),$e=document.querySelector("#rpg-input-rpattern-parity-extend"),ze=document.querySelector("#rpg-input-rpattern-parity-red"),Ue=document.querySelector("#rpg-input-rpattern-parity-blue"),We=document.querySelector("#rpg-input-generate-rpattern");for(var je in function(){var e;e=q.number,P.forEach((function(t){t.textContent=e})),function(e){M.forEach((function(t){t.textContent=e}))}(q.watermark),B.value=S.value.toString(),at(),it(),F.value=C.njs.toString(),w.value=C.offset.toString(),ht(),K.textContent=t(60/S.value*C.hjdMin*1e3)+"ms",Ze(),he.value=[100,98,97,96,95,94,93,90,85,80].join(","),U.value=R.note.toString(),W.value=R.star.toString(),Y.value="90",te.value="111",re.value=[3,22,100,102].join(","),oe.value=[127].join(","),u.custom=y([],u.scoresaber,!0),_t(),yt(),St(),Ct(),Je.value=E.row.toString(),ke.value=E.column.toString(),we.value="1",Ne.value="1",Ie.value="0",Ge.value="2",$e.value="0",Mt()}(),B.addEventListener("change",et),B.addEventListener("input",et),D.addEventListener("change",tt),D.addEventListener("input",tt),O.addEventListener("change",rt),O.addEventListener("input",rt),H.addEventListener("change",ot),H.addEventListener("input",ot),J.addEventListener("change",nt),J.addEventListener("input",nt),k.addEventListener("change",nt),k.addEventListener("input",nt),F.addEventListener("change",ct),F.addEventListener("input",ct),w.addEventListener("change",lt),w.addEventListener("input",lt),N.addEventListener("change",ut),N.addEventListener("input",ut),I.addEventListener("change",st),I.addEventListener("input",st),A.addEventListener("change",pt),A.addEventListener("input",pt),U.addEventListener("change",ft),U.addEventListener("input",ft),W.addEventListener("change",gt),W.addEventListener("input",gt),Y.addEventListener("change",dt),Y.addEventListener("input",dt),Q.addEventListener("change",vt),Q.addEventListener("input",vt),te.addEventListener("change",bt),te.addEventListener("input",bt),oe.addEventListener("change",mt),re.addEventListener("change",mt),he.addEventListener("change",(function(e){var t=this.value.trim().replace(/\s+,/,",");if(/^((\d+\.)?\d+,?)+/.test(t)){var r=t.split(",").map((function(e){return parseFloat(e)})).filter((function(e){return!isNaN(e)})).sort((function(e,t){return t-e}));this.value=r.toString(),St()}})),fe.addEventListener("change",(function(){R.curvePoints=u[this.value],ge.disabled=!0,"custom"===this.value&&(ge.disabled=!1),_t(),yt(),St(),Ct()})),ge.addEventListener("change",(function(){var e={};He.innerHTML="";try{e=/^{/.test(this.value.trim())?JSON.parse(this.value.trim()):JSON.parse("{"+this.value.trim().replace(/\,$/,"")+"}"),R.curvePoints=e.curvePoints,u.custom=e.curvePoints}catch(e){console.error(e),de.innerHTML=e+"<br>"}_t(),yt(),St(),Ct()})),ve.addEventListener("input",(function(e){""!==this.value.trim()?be.textContent=this.value.trim():be.textContent="none"})),me.addEventListener("click",Rt),_e.addEventListener("click",Rt),ye.addEventListener("click",Rt),Se.addEventListener("click",Rt),Ce.addEventListener("click",Rt),j.difficulty)Le[je].addEventListener("input",Lt);for(var Te in Ee.addEventListener("change",(function(){if(this.value!==Ye){for(var e in x.colorScheme)qe[e].value="",Pe[e].value="#000000",Me[e].checked=!1,Be[e].style.display="none";for(var e in x.environmentColor=this.value,x.colorScheme)if(x.colorScheme[e]){var t=x.getColorHex(x.colorScheme[e]);qe[e].value=t,Pe[e].value=t,Me[e].checked=!!x.colorScheme[e],Be[e].style.display="block"}jt()}})),x.colorScheme)qe[Te].addEventListener("change",xt),Pe[Te].addEventListener("change",Et),Me[Te].addEventListener("click",qt),Be[Te].addEventListener("click",Pt),Be[Te].style.display="none";var Ye="Custom",Qe=document.createElement("option");for(var Xe in Qe.value=Ye,Qe.textContent=Ye,Ee.append(Qe),g)(Qe=document.createElement("option")).value=Xe,Qe.textContent=Xe,Ee.append(Qe);function Ze(){T.forEach((function(e){e.disabled=!1}))}function et(e){S.value=Math.abs(parseFloat(this.value))||0,S.value>0?(L.update(),Ze(),it(),at(),ht(),K.textContent=t(60/S.value*C.hjdMin*1e3)+"ms"):T.forEach((function(e){e.disabled=!0})),"change"===e.type&&(this.value=S.value)}function tt(e){L.precBeat=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):1,L.precBeat>0&&(at(),O.value=t(L.precTime,3).toString(),H.value=t(L.precRealTime,1).toString()),"change"===e.type&&(this.value=t(L.precBeat,3).toString())}function rt(e){L.precTime=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):1,L.precTime>0&&(at(),D.value=t(L.precBeat,3).toString(),H.value=t(L.precRealTime,1).toString()),"change"===e.type&&(this.value=t(L.precTime,3).toString())}function ot(e){L.precRealTime=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):1,L.precRealTime>0&&(at(),D.value=t(L.precBeat,3).toString(),O.value=t(L.precTime,3).toString()),"change"===e.type&&(H.value=t(L.precRealTime,1).toString())}function nt(e){"ebpm-input-ebpm-ohj"===this.id&&(L.ebpmOHJ=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):S.value,"change"===e.type&&(this.value=t(L.ebpmOHJ,2).toString()),k.value=t(L.ebpmStream,2).toString()),"ebpm-input-ebpm-stream"===this.id&&(L.ebpmStream=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):S.value,"change"===e.type&&(this.value=t(L.ebpmStream,2).toString()),J.value=t(L.ebpmOHJ,2).toString()),it()}function it(){D.value=t(L.precBeat,3).toString(),O.value=t(L.precTime,3).toString(),H.value=t(L.precRealTime,1).toString()}function at(){J.value=t(L.ebpmOHJ,2).toString(),k.value=t(L.ebpmStream,2).toString()}function ct(e){C.njs=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):C.njs,ht(),"change"===e.type&&(this.value=t(C.njs,3))}function lt(e){C.offset=parseFloat(this.value)||0,ht(),"change"===e.type&&(this.value=t(C.offset,3))}function ut(e){C.offset=Math.max(Math.abs(parseFloat(this.value)),C.hjdMin)-C.calcHalfJumpDurationRaw(),w.value=t(C.offset,3).toString(),I.value=t(C.jd,3).toString(),A.value=t(1e3*C.reactTime).toString(),G.textContent=t(C.jdMin,2).toString(),"change"===e.type&&(this.value=t(C.hjd,3).toString())}function st(e){var r=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):C.jd;"hjd"===z.value&&(r=Math.max(r,C.jdMin),C.offset=C.calcHalfJumpDurationFromJD(r)-C.calcHalfJumpDurationRaw()),"njs"===z.value&&(C.njs=r/(2*C.calcReactionTimeHJD())),N.value=t(C.hjd,3).toString(),A.value=t(1e3*C.reactTime).toString(),G.textContent=t(C.jdMin,2).toString(),F.value=t(C.njs,3).toString(),w.value=t(C.offset,3).toString(),"change"===e.type&&(this.value=t(C.jd,2).toString())}function pt(e){var r=Math.max(Math.abs(parseFloat(this.value))/1e3>0?Math.abs(parseFloat(this.value))/1e3:C.calcReactionTimeHJD(),C.calcReactionTimeHJD(C.hjdMin));C.offset=r/(60/S.value)-C.calcHalfJumpDurationRaw(),N.value=t(C.hjd,3).toString(),I.value=t(C.jd,2).toString(),G.textContent=t(C.jdMin,2).toString(),w.value=t(C.offset,3).toString(),"change"===e.type&&(this.value=t(1e3*C.reactTime).toString())}function ht(){C.update(),N.value=t(C.hjd,3).toString(),I.value=t(C.jd,2).toString(),A.value=t(1e3*C.reactTime).toString(),V.textContent=t(C.calcJumpDistanceOptimalHigh(),2).toString(),$.textContent=t(C.calcJumpDistanceOptimalLow(),2).toString(),G.textContent=t(C.jdMin,2).toString()}function ft(e){R.note=parseInt(this.value)||0,_t(),yt(),St(),"change"===e.type&&(this.value=R.note.toString())}function gt(e){R.star=parseFloat(this.value)||0,_t(),yt(),St(),"change"===e.type&&(this.value=t(R.star,2).toString())}function dt(e){_t(),St(),"change"===e.type&&(this.value=t(parseFloat(this.value),2).toString())}function vt(e){var r=parseInt(this.value),o=R.calcScore();Y.value=t(r/o*100,2).toString(),X.value=t(R.calcPP(R.star,parseFloat(Y.value)/100),2).toString(),"change"===e.type&&(this.value=r.toString())}function bt(e){yt(),"change"===e.type&&(this.value=t(parseFloat(this.value),2).toString())}function mt(e){var t=this.value.trim().replace(/\s+,/,",");if(/^((\d+\.)?\d+,?)+/.test(t)||""===t){var r=t.split(",").map((function(e){return parseInt(e)})).filter((function(e){return!isNaN(e)})).sort((function(e,t){return e-t}));this.value=r.join(",").toString(),yt()}}function _t(){Q.value=t(R.calcScore()*(parseFloat(Y.value)/100)).toString(),X.value=t(R.calcPP(R.star,parseFloat(Y.value)/100),2).toString(),Z.textContent=r(R.calcScore()),ee.textContent=r(R.calcScore())}function yt(){var e=re.value.split(",").map((function(e){return parseInt(e)}))||[],o=oe.value.split(",").map((function(e){return parseInt(e)}))||[],n=R.calcScore(),i=R.calcScore(parseFloat(te.value),void 0,e,o),a=R.calcScore(parseFloat(te.value));ne.textContent=r(t(i)),ie.textContent=t(i/n*100,2).toString(),ae.textContent=t(R.calcPP(R.star,i/n),2).toString(),ce.textContent=r(t(a-i)),le.textContent=r(t(a)),ue.textContent=t(a/n*100,2).toString(),se.textContent=t(R.calcPP(R.star,a/n),2).toString()}function St(){pe.innerHTML="<tr><th>Percentage</th><th>Score</th><th>PP</th></tr>";for(var e=he.value.split(",").map((function(e){return parseFloat(e)})),o=0;o<e.length;o++){var n=document.createElement("tr"),i=document.createElement("td"),a=document.createElement("td"),c=document.createElement("td");i.textContent=t(e[o],2).toString(),a.textContent=r(t(R.calcScore()*(e[o]/100))),c.textContent=t(R.calcPP(R.star,e[o]/100),2).toString(),n.appendChild(i),n.appendChild(a),n.appendChild(c),pe.appendChild(n)}}function Ct(){var e={curvePoints:y([],R.curvePoints,!0).reverse()};ge.value=JSON.stringify(e,null,4)}function Lt(e){var r=this.id.slice(10);j.difficulty[r]=this.value?Math.abs(parseFloat(this.value.trim())):null;var o=null;for(var n in j.difficulty)null!==j.difficulty[n]&&(null!==o&&(Re[o].textContent=(0!==j.difficulty[n]?j.calcDifference(n,o).toFixed(2):"Infinity")+"%"),o=n),Re[n].textContent="";xe.textContent=j.getTotalReduction().toFixed(2)+"%","change"===e.type&&null!==j.difficulty[r]&&(this.value=t(j.difficulty[r],2).toString())}function Rt(e){be.className="diff-label diff-count-"+parseInt(this.value)}function jt(){var e={};for(var t in x.colorScheme)Me[t].checked&&(e[t]=x.colorScheme[t]);Oe.value=JSON.stringify(e,null,4)}function xt(){if(/^\#?[0-9a-fA-F]{6,8}/.test(this.value.trim())){var e="_"+this.id.slice(13);for(var t in x.colorScheme)e===t.toLowerCase()&&(e=t);var r=this.value.trim().replace(/^\#?/,"#").slice(0,7);x.colorScheme[e]=x.hexToRGB(r),qe[e].value=r,Pe[e].value=r,Me[e].checked=!0,Be[e].style.display="block",jt()}}function Et(){var e="_"+this.id.slice(16);for(var t in x.colorScheme)e===t.toLowerCase()&&(e=t);x.colorScheme[e]=x.hexToRGB(this.value),qe[e].value=this.value,Me[e].checked=!0,Be[e].style.display="block",jt()}function qt(){var e="_"+this.id.slice(17);for(var t in x.colorScheme)e===t.toLowerCase()&&(e=t);this.checked&&(x.colorScheme[e]=x.hexToRGB(Pe[e].value),qe[e].value=Pe[e].value,Be[e].style.display="block"),jt()}function Pt(){var e="_"+this.id.slice(15);for(var t in x.colorScheme)e===t.toLowerCase()&&(e=t);x.colorScheme[e]=null,qe[e].value="",Pe[e].value="#000000",Me[e].checked=!1,Be[e].style.display="none",jt()}function Mt(){Fe.innerHTML="";for(var e=0;e<E.row;e++){for(var t=document.createElement("tr"),r=0;r<E.column;r++){var o=document.createElement("td");o.className="table-grid";var n=document.createElement("img");n.className="table-rpattern-image",n.src="./assets/"+b.blank,n.alt=b.blank.slice(0,-4),o.appendChild(n),t.appendChild(o)}Fe.appendChild(t)}}Oe.addEventListener("change",(function(){for(var e in x.colorScheme)qe[e].value="",Pe[e].value="#000000",Me[e].checked=!1,Be[e].style.display="none";He.innerHTML="";var t=["_colorLeft","_colorRight","_envColorLeft","_envColorRight","_envColorLeftBoost","_envColorRightBoost","_obstacleColor"],r={};try{r=/^{/.test(this.value.trim())?JSON.parse(this.value.trim()):JSON.parse("{"+this.value.trim().replace(/\,$/,"")+"}")}catch(e){console.error(e),He.innerHTML=e+"<br>"}for(var e in r)if(t.includes(e)){x.colorScheme[e]=r[e];var o=x.getColorHex(r[e]);qe[e].value=o,Pe[e].value=o,Me[e].checked=!0,Be[e].style.display="block"}jt()})),Je.addEventListener("click",(function(){var e=Math.min(Math.abs(parseFloat(this.value))||1,4);this.value=e,E.row=e,Mt()})),ke.addEventListener("click",(function(){var e=Math.min(Math.abs(parseFloat(this.value))||1,8);this.value=e,E.column=e,Mt()})),We.addEventListener("click",(function(){var e=document.querySelectorAll(".table-rpattern-image");e.forEach((function(e){e.src="./assets/blank.png",e.alt="blank",e.className="table-rpattern-image"})),E.noteRed=parseInt(we.value)||0,E.noteBlue=parseInt(Ne.value)||0,E.noteBomb=parseInt(Ie.value)||0,E.noDot=Ke.checked,E.limit=Ae.checked,E.total=parseInt(Ge.value)||0,E.parity=Ve.checked,E.parityExtend=parseInt($e.value)||0,E.parityRed=ze.checked,E.parityBlue=Ue.checked;for(var t=E.generate(),r=0;r<t.length;r++)null!==t[r]&&(e[r].src="./assets/"+(8!==t[r]._noteDirection||Ke.checked?b[t[r]._noteType]:b[t[r]._noteType+3]),e[r].alt=b[t[r]._noteType].slice(0,-4),8!==t[r]._noteDirection&&(e[r].className+=" "+m[t[r]._noteDirection],e[r].alt+=" "+m[t[r]._noteDirection]))}))})();