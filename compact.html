<!DOCTYPE html><html lang="en"><head> <meta charset="utf-8"/> <style>body{font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #fff; background: #171717; display: block; margin: auto; max-width: 40em;}.settings{width: 100%;}.panel-small{display: inline-block; vertical-align: top; width: 10em;}.input{width: 4em;}#input-beatprec{width: 3.75em;}#input-njs-scale{width: auto;}</style> <title>BS Mapping Utility</title></head><body> <h1>Beat Saber Mapping Utility</h1> <div class="settings"> <div class="panel-small"> <label for="input-bpm">BPM:</label><br><input type="number" class="input main" id="input-bpm" name="input-bpm" min="0" step="1"> <br><label for="input-beatprec">Beat Prec.: 1 / </label> <input type="number" class="input" id="input-beatprec" name="input-beatprec" min="1" step="1" disabled> <br><label for="input-timeprec">Time Prec.: </label> <input type="number" class="input" id="input-timeprec" name="input-timeprec" min="0" step="0.125" disabled> </div><div class="panel-small"> <span>Effective BPM:</span><br><input type="number" class="input" id="input-ebpm-ohj" name="input-ebpm-ohj" min="0" step="1" disabled> <label for="input-ebpm-ohj">(1-handed)</label> <br><input type="number" class="input" id="input-ebpm-stream" name="input-ebpm-stream" min="0" step="1" disabled> <label for="input-ebpm-stream">(2-handed)</label> </div><div class="panel-small" style="width: auto"> <span>Time between precision: </span><span id="output-time-prec">0ms</span><br></div><hr> <div class="panel-small"> <input type="number" class="input" id="input-njs" name="input-njs" min="0" step="1" disabled> <label for="input-njs">NJS</label><br><input type="number" class="input" id="input-offset" name="input-offset" step="0.125" disabled> <label for="input-offset">Offset</label><br><br></div><div class="panel-small"> <input type="number" class="input" id="input-hjd" name="input-hjd" min="0" step="1" disabled> <label for="input-hjd">HJD</label><br><input type="number" class="input" id="input-jd" name="input-jd" min="0" step="0.25" disabled> <label for="input-jd">JD</label><br><label for="input-reacttime">Reaction Time (ms):</label><br><input type="number" class="input" id="input-reacttime" name="input-reacttime" min="0" step="1" disabled> </div><div class="panel-small" style="width: auto"> <span>Minimum </span> </div><div class="panel-small" style="width: auto"> <span>HJD: </span><span id="output-hjd">1</span><br><span>JD: </span><span id="output-jd">0</span><br><span>Reaction Time: </span><span id="output-reacttime">0ms</span> </div><br><br><div> <label for="input-njs-scale">Jump distance scale for:</label> <select class="input" id="input-njs-scale" disabled> <option value="njs">NJS - Note Jump Speed</option> <option value="hjd" selected>HJD - Half Jump Duration</option> </select><br><span>When changing jump distance, scale either HJD or NJS.</span> </div></div><hr> <div style="float: right"> <span id="watermark"></span> <a id="version"></a> </div><script defer>document.getElementById('watermark').innerHTML='Kival Evan#5480 | '; document.getElementById('version').innerHTML='v1.1.2'; const input={bpm: 0, ebpm:{stream: 0, ohj: 0,}, beatPrec: 2, timePrec: 0.5, njs: 16, offset: 0, hjd: 0, jd: 0, reactTime: 0, njsScale: 'hjd',}; document.getElementById('input-bpm').value=input.bpm; document.getElementById('input-beatprec').value=input.beatPrec; document.getElementById('input-timeprec').value=input.timePrec; document.getElementById('input-ebpm-stream').value=input.ebpm.stream; document.getElementById('input-ebpm-ohj').value=input.ebpm.ohj; document.getElementById('input-njs').value=input.njs; document.getElementById('input-offset').value=input.offset; document.getElementById('input-hjd').value=input.hjd; document.getElementById('input-jd').value=input.jd; document.getElementById('input-reacttime').value=input.reactTime; function calcEffectiveBPM(){return (input.bpm * 0.5) / (1 / input.beatPrec);}function calcBeatPrecision(){return input.ebpm.stream / (input.bpm * 0.25);}function calcHalfJumpDuration(){const maxHalfJump=18; const noteJumpMovementSpeed=(input.njs * input.bpm) / input.bpm; const num=60 / input.bpm; let hjd=4; while (noteJumpMovementSpeed * num * hjd > maxHalfJump){hjd /=2;}hjd +=input.offset; if (hjd < 1){hjd=1;}return hjd;}function calcHalfJumpDurationNoOffset(){const maxHalfJump=18; const noteJumpMovementSpeed=(input.njs * input.bpm) / input.bpm; const num=60 / input.bpm; let hjd=4; while (noteJumpMovementSpeed * num * hjd > maxHalfJump){hjd /=2;}if (hjd < 1){hjd=1;}return hjd;}function calcJumpDistance(){return input.njs * (60 / input.bpm) * calcHalfJumpDuration() * 2;}function calcReactionTimeJD(){return calcJumpDistance() / (2 * input.njs);}function calcReactionTimeHJD(){return (60 / input.bpm) * calcHalfJumpDuration();}function round(num, d=0){if (!d > 0){return Math.round(num);}return Math.round(num * Math.pow(10, d)) / Math.pow(10, d);}document.getElementById('input-bpm').addEventListener('input', function (){input.bpm=Math.abs(parseFloat(this.value)) || 0; inputBPM();}); document.getElementById('input-bpm').addEventListener('change', function (){input.bpm=Math.abs(parseFloat(this.value)) || 0; inputBPM(); document.getElementById('input-bpm').value=input.bpm;}); document.getElementById('input-beatprec').addEventListener('input', function (){input.beatPrec=Math.abs(parseFloat(this.value)) > 0 ? Math.abs(parseFloat(this.value)) : 1; inputBeatPrec();}); document.getElementById('input-beatprec').addEventListener('change', function (){input.beatPrec=Math.abs(parseFloat(this.value)) > 0 ? Math.abs(parseFloat(this.value)) : 1; inputBeatPrec(); document.getElementById('input-beatprec').value=round(input.beatPrec, 3);}); document.getElementById('input-timeprec').addEventListener('input', function (){input.timePrec=Math.abs(parseFloat(this.value)) > 0 ? Math.abs(parseFloat(this.value)) : 1; inputTimePrec();}); document.getElementById('input-timeprec').addEventListener('change', function (){input.timePrec=Math.abs(parseFloat(this.value)) > 0 ? Math.abs(parseFloat(this.value)) : 1; inputTimePrec(); document.getElementById('input-timeprec').value=round(input.timePrec, 3);}); document.getElementById('input-ebpm-ohj').addEventListener('input', function (){input.ebpm.ohj=Math.abs(parseFloat(this.value)) > 0 ? Math.abs(parseFloat(this.value)) : input.bpm; inputEBPMOHJ();}); document.getElementById('input-ebpm-ohj').addEventListener('change', function (){input.ebpm.ohj=Math.abs(parseFloat(this.value)) > 0 ? Math.abs(parseFloat(this.value)) : input.bpm; inputEBPMOHJ(); document.getElementById('input-ebpm-ohj').value=round(input.ebpm.ohj, 2);}); document.getElementById('input-ebpm-stream').addEventListener('input', function (){input.ebpm.stream=Math.abs(parseFloat(this.value)) > 0 ? Math.abs(parseFloat(this.value)) : input.bpm; inputEBPMStream();}); document.getElementById('input-ebpm-stream').addEventListener('change', function (){input.ebpm.stream=Math.abs(parseFloat(this.value)) > 0 ? Math.abs(parseFloat(this.value)) : input.bpm; inputEBPMStream(); document.getElementById('input-ebpm-stream').value=round(input.ebpm.stream, 2);}); document.getElementById('input-njs').addEventListener('input', function (){input.njs=Math.abs(parseFloat(this.value)) > 0 ? Math.abs(parseFloat(this.value)) : input.njs; updateNJS();}); document.getElementById('input-njs').addEventListener('change', function (){input.njs=Math.abs(parseFloat(this.value)) > 0 ? Math.abs(parseFloat(this.value)) : input.njs; updateNJS(); document.getElementById('input-njs').value=round(input.njs, 3);}); document.getElementById('input-offset').addEventListener('input', function (){input.offset=parseFloat(this.value) || 0; updateNJS();}); document.getElementById('input-offset').addEventListener('change', function (){input.offset=parseFloat(this.value) || 0; updateNJS(); document.getElementById('input-offset').value=round(input.offset, 3);}); document.getElementById('input-hjd').addEventListener('input', function (){input.hjd=Math.abs(parseFloat(this.value)) >=1 ? Math.abs(parseFloat(this.value)) : input.hjd; inputHJD();}); document.getElementById('input-hjd').addEventListener('change', function (){input.hjd=Math.abs(parseFloat(this.value)) >=1 ? Math.abs(parseFloat(this.value)) : input.hjd; inputHJD(); document.getElementById('input-hjd').value=round(input.hjd, 3);}); document.getElementById('input-jd').addEventListener('input', function (){input.jd=Math.abs(parseFloat(this.value)) > 0 ? Math.abs(parseFloat(this.value)) : input.jd; inputJD();}); document.getElementById('input-jd').addEventListener('change', function (){input.jd=Math.abs(parseFloat(this.value)) > 0 ? Math.abs(parseFloat(this.value)) : input.jd; inputJD(); document.getElementById('input-jd').value=round(input.jd, 2);}); document.getElementById('input-reacttime').addEventListener('input', function (){input.reactTime=Math.abs(parseFloat(this.value)) / 1000 > 0 ? Math.abs(parseFloat(this.value)) / 1000 : input.reactTime; inputReactTime();}); document.getElementById('input-reacttime').addEventListener('change', function (){input.reactTime=Math.abs(parseFloat(this.value)) / 1000 > 0 ? Math.abs(parseFloat(this.value)) / 1000 : input.reactTime; inputReactTime(); document.getElementById('input-reacttime').value=round(input.reactTime * 1000);}); document.getElementById('input-njs-scale').addEventListener('change', function (){input.njsScale=this.value;}); function enableInput(){document.getElementById('input-beatprec').disabled=false; document.getElementById('input-timeprec').disabled=false; document.getElementById('input-ebpm-ohj').disabled=false; document.getElementById('input-ebpm-stream').disabled=false; document.getElementById('input-njs').disabled=false; document.getElementById('input-offset').disabled=false; document.getElementById('input-hjd').disabled=false; document.getElementById('input-jd').disabled=false; document.getElementById('input-reacttime').disabled=false; document.getElementById('input-njs-scale').disabled=false;}function disableInput(){document.getElementById('input-beatprec').disabled=true; document.getElementById('input-timeprec').disabled=true; document.getElementById('input-ebpm-ohj').disabled=true; document.getElementById('input-ebpm-stream').disabled=true; document.getElementById('input-njs').disabled=true; document.getElementById('input-offset').disabled=true; document.getElementById('input-hjd').disabled=true; document.getElementById('input-jd').disabled=true; document.getElementById('input-reacttime').disabled=true; document.getElementById('input-njs-scale').disabled=true;}function inputBPM(){if (input.bpm > 0){enableInput(); updateEBPM(); updateNJS(); document.getElementById('output-reacttime').innerHTML=`${round((60 / input.bpm) * 1000)}ms`;}else{disableInput();}}function inputBeatPrec(){if (input.beatPrec > 0){updateEBPM(); input.timePrec=1 / input.beatPrec; document.getElementById('input-timeprec').value=round(input.timePrec, 3);}}function inputTimePrec(){if (input.beatPrec > 0){updateEBPM(); input.beatPrec=1 / input.timePrec; document.getElementById('input-beatprec').value=round(input.beatPrec, 3);}}function inputEBPMOHJ(){input.ebpm.stream=input.ebpm.ohj / 2; input.beatPrec=calcBeatPrecision(); document.getElementById('input-beatprec').value=round(input.beatPrec, 3); document.getElementById('input-ebpm-ohj').value=round(input.ebpm.ohj, 2); document.getElementById('input-ebpm-stream').value=round(input.ebpm.stream, 2);}function inputEBPMStream(){input.ebpm.ohj=input.ebpm.stream * 2; input.beatPrec=calcBeatPrecision(); document.getElementById('input-beatprec').value=round(input.beatPrec, 3); document.getElementById('input-ebpm-ohj').value=round(input.ebpm.ohj, 2);}function updateEBPM(){input.ebpm.ohj=calcEffectiveBPM(); input.ebpm.stream=calcEffectiveBPM() / 2; document.getElementById('input-ebpm-ohj').value=round(input.ebpm.ohj, 2); document.getElementById('input-ebpm-stream').value=round(input.ebpm.stream, 2); document.getElementById('output-time-prec').innerHTML=`${round((60 / input.bpm / input.beatPrec) * 1000, 1)}ms`;}function updateNJS(){input.hjd=calcHalfJumpDuration(); input.jd=calcJumpDistance(); input.reactTime=calcReactionTimeJD(); document.getElementById('input-hjd').value=round(input.hjd, 3); document.getElementById('input-jd').value=round(input.jd, 2); document.getElementById('input-reacttime').value=round(input.reactTime * 1000); document.getElementById('output-jd').innerHTML=round(input.njs * (60 / input.bpm) * 2, 2);}function inputHJD(){input.offset=input.hjd - calcHalfJumpDurationNoOffset(); input.hjd=calcHalfJumpDuration(); input.jd=calcJumpDistance(); input.reactTime=calcReactionTimeJD(); document.getElementById('input-jd').value=round(input.jd, 2); document.getElementById('input-reacttime').value=round(input.reactTime * 1000); document.getElementById('output-jd').innerHTML=round(input.njs * (60 / input.bpm) * 2, 2); document.getElementById('input-offset').value=round(input.offset, 3);}function inputJD(){if (input.njsScale==='hjd'){if (input.jd / ((60 / input.bpm) * input.njs * 2) < 1){input.jd=input.njs * (60 / input.bpm) * 2;}input.hjd=input.jd / ((60 / input.bpm) * input.njs * 2);}if (input.njsScale==='njs'){console.log(input.jd / (2 * input.reactTime)); input.njs=input.jd / (2 * input.reactTime);}input.offset=input.hjd - calcHalfJumpDurationNoOffset(); input.hjd=calcHalfJumpDuration(); input.jd=calcJumpDistance(); input.reactTime=calcReactionTimeJD(); document.getElementById('input-hjd').value=round(input.hjd, 3); document.getElementById('input-reacttime').value=round(input.reactTime * 1000); document.getElementById('output-jd').innerHTML=round(input.njs * (60 / input.bpm) * 2, 2); document.getElementById('input-njs').value=round(input.njs, 3); document.getElementById('input-offset').value=round(input.offset, 3);}function inputReactTime(){if (input.reactTime < 60 / input.bpm){input.reactTime=60 / input.bpm;}input.hjd=input.reactTime / (60 / input.bpm); input.offset=input.hjd - calcHalfJumpDurationNoOffset(); input.hjd=calcHalfJumpDuration(); input.jd=calcJumpDistance(); input.reactTime=calcReactionTimeJD(); document.getElementById('input-hjd').value=round(input.hjd, 3); document.getElementById('input-jd').value=round(input.jd, 2); document.getElementById('output-jd').innerHTML=round(input.njs * (60 / input.bpm) * 2, 2); document.getElementById('input-offset').value=round(input.offset, 3);}</script></body></html>