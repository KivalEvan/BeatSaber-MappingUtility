(()=>{"use strict";const e=function(){function e(){this.version="v2.0.4",this.wm="Kival Evan#5480"}return Object.defineProperty(e.prototype,"number",{get:function(){return this.version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"watermark",{get:function(){return this.wm},enumerable:!1,configurable:!0}),e}();function t(e,t){return void 0===t&&(t=0),t>0?Math.round(e*Math.pow(10,t))/Math.pow(10,t):Math.round(e)}function r(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var o=function(e){return e*(Math.PI/180)},n=function(){function e(e){void 0===e&&(e=128),this.bpm=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.bpm},set:function(e){this.bpm=e},enumerable:!1,configurable:!0}),e}();const i=n;var a=function(){function e(e,t){void 0===t&&(t=2),this._bpm=e,this._precBeat=t,this.update()}return Object.defineProperty(e.prototype,"precBeat",{get:function(){return this._precBeat},set:function(e){this._precBeat=e,this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"precTime",{get:function(){return this._precTime},set:function(e){this.precBeat=1/e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"precRealTime",{get:function(){return this._precRealTime},set:function(e){this.precBeat=1/(this._bpm.value*e/6e4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ebpmStream",{get:function(){return this._ebpmStream},set:function(e){this._ebpmStream=e,this.precBeat=this.calcBeatPrecision()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ebpmOHJ",{get:function(){return this._ebpmOHJ},set:function(e){this._ebpmStream=e/2,this.precBeat=this.calcBeatPrecision()},enumerable:!1,configurable:!0}),e.prototype.update=function(){this._precTime=1/this._precBeat,this._precRealTime=60/this._bpm.value/this._precBeat*1e3,this._ebpmOHJ=this.calcEffectiveBPM(),this._ebpmStream=this._ebpmOHJ/2},e.prototype.calcEffectiveBPM=function(){return.5*this._bpm.value/(1/this._precBeat)},e.prototype.calcBeatPrecision=function(){return this._ebpmStream/(.25*this._bpm.value)},e}();const c=a;var l=function(){function e(e,t,r){void 0===t&&(t=10),void 0===r&&(r=0),this._bpm=e,this._njs=t,this._sdm=r,this.update()}return Object.defineProperty(e.prototype,"njs",{get:function(){return this._njs},set:function(e){this._njs=e,this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._sdm},set:function(e){this._sdm=e,this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hjd",{get:function(){return this._hjd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hjdMin",{get:function(){return e.HJD_MIN},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reactTime",{get:function(){return this._reactionTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"jd",{get:function(){return this._jd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"jdMin",{get:function(){return this._jdMin},enumerable:!1,configurable:!0}),e.prototype.update=function(){this._hjd=this.calcHalfJumpDuration(),this._jd=this.calcJumpDistance(),this._jdMin=this.calcJumpDistance(e.HJD_MIN),this._reactionTime=this.calcReactionTimeHJD()},e.prototype.calcHalfJumpDurationRaw=function(){for(var t=this._njs*this._njs/this._njs,r=60/this._bpm.value,o=e.HJD_START;t*r*o>18;)o/=2;return o<1&&(o=1),o},e.prototype.calcHalfJumpDuration=function(t){return void 0===t&&(t=this.offset),Math.max(this.calcHalfJumpDurationRaw()+t,e.HJD_MIN)},e.prototype.calcHalfJumpDurationFromJD=function(e){return void 0===e&&(e=this.calcJumpDistance()),e/(60/this._bpm.value*this._njs*2)},e.prototype.calcHalfJumpDurationFromRT=function(e){return void 0===e&&(e=this.calcReactionTimeHJD()),e/(60/this._bpm.value)},e.prototype.calcJumpDistance=function(e){return void 0===e&&(e=this.calcHalfJumpDuration()),this._njs*(60/this._bpm.value)*e*2},e.prototype.calcJumpDistanceOptimalHigh=function(){return 18*Math.pow(1/1.07,this._njs)+18},e.prototype.calcJumpDistanceOptimalLow=function(){return-18/(this._njs+1)+18},e.prototype.calcReactionTimeJD=function(e){return void 0===e&&(e=this.calcJumpDistance()),e/(2*this._njs)},e.prototype.calcReactionTimeHJD=function(e){return void 0===e&&(e=this.calcHalfJumpDuration()),60/this._bpm.value*e},e.HJD_START=4,e.HJD_MIN=.25,e}();const u=l;var s={scoresaber:[[1.14,1.2],[1.1,1.15],[1,1.1],[.95,1.036],[.94,.974],[.93,.92],[.92,.885],[.91,.85],[.9,.815],[.88,.766],[.86,.72],[.845,.63],[.82,.56],[.75,.425],[.69,.25],[.5,.15],[.4,.08],[0,0]],exponential:[[1,8],[.99,4],[.98,2],[.97,1.5],[.96,1.1],[.95,1.036],[.94,.974],[.93,.92],[.92,.885],[.91,.85],[.9,.815],[.88,.766],[.86,.72],[.845,.63],[.82,.56],[.75,.425],[.69,.25],[.5,.15],[.4,.08],[0,0]]},p=function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};const h=function(){function e(e,t,r){void 0===e&&(e=0),void 0===t&&(t=7),void 0===r&&(r=s.scoresaber),this._starRating=7,this._starPP=42.521,this._note=e,this._starRating=t,this._curvePoints=p([],r,!0).sort((function(e,t){return e[0]-t[0]}))}return Object.defineProperty(e.prototype,"note",{get:function(){return this._note},set:function(e){this._note=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"star",{get:function(){return this._starRating},set:function(e){this._starRating=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curvePoints",{get:function(){return this._curvePoints},set:function(e){this._curvePoints=p([],e,!0).sort((function(e,t){return e[0]-t[0]}))},enumerable:!1,configurable:!0}),e.prototype.calcPP=function(e,t){return void 0===e&&(e=this._starRating),void 0===t&&(t=.9458064516129032),this._starPP*e*(r=this._curvePoints,o=t,c=r.map((function(e){return e[0]})),l=r.map((function(e){return e[1]})),u=null!==(n=p([],c,!0).reverse().find((function(e){return e<=o})))&&void 0!==n?n:c[0],s=null!==(i=c.find((function(e){return e>=o})))&&void 0!==i?i:u,h=l[c.indexOf(u)],f=l[c.indexOf(s)],g=function(e,t,r){return function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),Math.min(r,Math.max(t,e))}((r-e)/(t-e))}(u,s,o)||0,l[c.indexOf(o)]||(a=h)+(f-a)*g);var r,o,n,i,a,c,l,u,s,h,f,g},e.prototype.calcScore=function(e,t,r,o){void 0===e&&(e=115),void 0===t&&(t=1),void 0===r&&(r=[]),void 0===o&&(o=[]);var n=0,i=e*t,a=!0,c=0,l=1,u=p([],r,!0).map((function(e){return e-1})),s=p([],o,!0).map((function(e){return e-1}));function h(){l=Math.max(l/2,1),c=0,a=!0}for(var f=0;f<this._note;f++)s.includes(f)&&h(),u.includes(f)?h():(c++,a&&c>=2*l&&((l*=2)>=8&&(a=!1),c=0),n+=i*l);return n},e}();var f=function(){function e(){this._difficulty={easy:null,normal:null,hard:null,expert:null,expertplus:null}}return Object.defineProperty(e.prototype,"difficulty",{get:function(){return this._difficulty},enumerable:!1,configurable:!0}),e.prototype.calcDifference=function(e,t){return 100*(1-this._difficulty[t]/this._difficulty[e])},e.prototype.getTotalReduction=function(){var e=null,t=null;for(var r in this._difficulty)null!==this._difficulty[r]&&((!e||e<this._difficulty[r])&&(e=this._difficulty[r]),(!t||t>this._difficulty[r])&&(t=this._difficulty[r]));return e||e&&t?100*(1-t/e):0},e}();const g=f;var d=function(e){return[e.r,e.g,e.b]},v=function(e){var t,r,o,n=e[0],i=e[1],a=e[2];return r=(.2126*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.7152*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.0722*(a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92))/1,o=(.0193*n+.1192*i+.9505*a)/1.08883,t=(t=(.4124*n+.3576*i+.1805*a)/.95047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(t-r),200*(r-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]},b=function(e,t){var r=0;return e>=0&&0===t?0:e<0&&0===t?180:0===e&&t>0?90:0===e&&t<0?270:(e>0&&t>0&&(r=0),e<0&&(r=180),e>0&&t<0&&(r=360),Math.atan(t/e)*(180/Math.PI)+r)},m=function(e,r){var n,i,a,c,l,u,s,p,h,f,g,d,m,_,y,S,C,L,R,j,M=v(e),x=M[0],q=M[1],E=M[2],P=v(r),B=P[0],T=P[1],D=P[2];return a=(Math.sqrt(q*q+E*E)+Math.sqrt(T*T+D*D))/2,h=(1+(l=.5*(1-Math.sqrt((7^a)/(30+(7^a))))))*q,n=Math.sqrt(h*h+E*E),u=b(h,E),h=(1+l)*T,i=Math.sqrt(h*h+D*D),s=b(h,D),L=B-x,R=i-n,n*i==0?j=0:(h=t(s-u,12),j=Math.abs(h)<=180?s-u:h>180?s-u-360:s-u+360),j=2*Math.sqrt(n*i)*Math.sin(o(j/2)),f=(x+B)/2,c=(n+i)/2,n*i==0?p=u+s:(p=(h=Math.abs(t(u-s,12)))>180?s+u<360?u+s+360:u+s-360:u+s,p/=2),g=1-.17*Math.cos(o(p-30))+.24*Math.cos(o(2*p))+.32*Math.cos(o(3*p+6))-.2*Math.cos(o(4*p-63)),y=30*Math.exp(-(p-275)/25*((p-275)/25)),S=2*Math.sqrt((7^c)/(30+(7^c))),d=1+(f-50)*(f-50)*.015/Math.sqrt(20+(f-50)*(f-50)),m=1+.045*c,_=1+.015*c*g,C=-Math.sin(o(2*y))*S,L/=1*d,R/=1*m,j/=1*_,Math.sqrt(L*L+R*R+j*j+C*R*j)},_={"Default Custom":{_colorLeft:{r:.7529412,g:.1882353,b:.1882353},_colorRight:{r:.1254902,g:.3921569,b:.6588235},_envColorLeft:{r:.7529412,g:.1882353,b:.1882353},_envColorRight:{r:.1882353,g:.5960785,b:1},_obstacleColor:{r:1,g:.1882353,b:.1882353}},"The First":{_colorLeft:{r:.7843137,g:.07843138,b:.07843138},_colorRight:{r:.1568627,g:.5568627,b:.8235294},_envColorLeft:{r:.85,g:.08499997,b:.08499997},_envColorRight:{r:.1882353,g:.675294,b:1},_obstacleColor:{r:1,g:.1882353,b:.1882353}},Origins:{_colorLeft:{r:.6792453,g:.5712628,b:0},_colorRight:{r:.7075472,g:0,b:.5364411},_envColorLeft:{r:.4910995,g:.6862745,b:.7},_envColorRight:{r:.03844783,g:.6862745,b:.9056604},_obstacleColor:{r:.06167676,g:.2869513,b:.3962264}},KDA:{_colorLeft:{r:.6588235,g:.2627451,b:.1607843},_colorRight:{r:.5019608,g:.08235294,b:.572549},_envColorLeft:{r:1,g:.3960785,b:.2431373},_envColorRight:{r:.7607844,g:.1254902,b:.8666667},_obstacleColor:{r:1,g:.3960785,b:.2431373}},"Crab Rave":{_colorLeft:{r:0,g:.7130001,b:.07806564},_colorRight:{r:.04805952,g:.5068096,b:.734},_envColorLeft:{r:.134568,g:.756,b:.1557533},_envColorRight:{r:.05647058,g:.6211764,b:.9},_obstacleColor:{r:0,g:.8117648,b:.09019608}},Noir:{_colorLeft:{r:.1792453,g:.1792453,b:.1792453},_colorRight:{r:.5943396,g:.5943396,b:.5943396},_envColorLeft:{r:.4056604,g:.4056604,b:.4056604},_envColorRight:{r:.6037736,g:.6037736,b:.6037736},_obstacleColor:{r:.2358491,g:.2358491,b:.2358491}},Rocket:{_colorLeft:{r:1,g:.4980392,b:0},_colorRight:{r:0,g:.5294118,b:1},_envColorLeft:{r:.9,g:.4866279,b:.3244186},_envColorRight:{r:.4,g:.7180724,b:1},_obstacleColor:{r:.3176471,g:.6117647,b:.7254902}},"Green Day":{_colorLeft:{r:.2588235,g:.7843138,b:.01960784},_colorRight:{r:0,g:.7137255,b:.6705883},_envColorLeft:{r:0,g:.7137255,b:.6705883},_envColorRight:{r:.2588235,g:.7843137,b:.01960784},_obstacleColor:{r:0,g:.8117648,b:.09019608}},Timbaland:{_colorLeft:{r:.5019608,g:.5019608,b:.5019608},_colorRight:{r:.1,g:.5517647,b:1},_envColorLeft:{r:.1,g:.5517647,b:1},_envColorRight:{r:.1,g:.5517647,b:1},_obstacleColor:{r:.5,g:.5,b:.5}},FitBeat:{_colorLeft:{r:.8000001,g:.6078432,b:.1568628},_colorRight:{r:.7921569,g:.1607843,b:.682353},_envColorLeft:{r:.8,g:.5594772,b:.5594772},_envColorRight:{r:.5594772,g:.5594772,b:.8},_obstacleColor:{r:.2784314,g:.2784314,b:.4}},"Linkin Park":{_colorLeft:{r:.6627451,g:.1643608,b:.1690187},_colorRight:{r:.3870196,g:.5168997,b:.5568628},_envColorLeft:{r:.7529412,g:.672753,b:.5925647},_envColorRight:{r:.6241197,g:.6890281,b:.709},_envColorLeftBoost:{r:.922,g:.5957885,b:.255394},_envColorRightBoost:{r:.282353,g:.4586275,b:.6235294},_obstacleColor:{r:.6627451,g:.1647059,b:.172549}},BTS:{_colorLeft:{r:1,g:.09019607,b:.4059771},_colorRight:{r:.8018868,g:0,b:.7517689},_envColorLeft:{r:.7843137,g:.1254902,b:.5010797},_envColorRight:{r:.6941177,g:.1254902,b:.8666667},_envColorLeftBoost:{r:.9019608,g:.5411765,b:1},_envColorRightBoost:{r:.3490196,g:.8078431,b:1},_obstacleColor:{r:.6698113,g:.1800908,b:.5528399}},Kaleidoscope:{_colorLeft:{r:.65882355,g:.1254902,b:.1254902},_colorRight:{r:.28235295,g:.28235295,b:.28235295},_envColorLeft:{r:.65882355,g:.1254902,b:.1254902},_envColorRight:{r:.47058824,g:.47058824,b:.47058824},_envColorLeftBoost:{r:.50196081,g:0,b:0},_envColorRightBoost:{r:.49244517,g:0,b:.53725493},_obstacleColor:{r:.25098041,g:.25098041,b:.25098041}},Interscope:{_colorLeft:{r:.726415,g:.62691,b:.31181},_colorRight:{r:.589571,g:.297888,b:.723},_envColorLeft:{r:.724254,g:.319804,b:.913725},_envColorRight:{r:.764706,g:.758971,b:.913725},_envColorLeftBoost:{r:.792453,g:.429686,b:.429868},_envColorRightBoost:{r:.7038,g:.715745,b:.765},_obstacleColor:{r:.588235,g:.298039,b:.721569}},Skrillex:{_colorLeft:{r:.69803923,g:.14117648,b:.36862746},_colorRight:{r:.32933334,g:.32299998,b:.38},_envColorLeft:{r:.80000001,g:.28000003,b:.58594489},_envColorRight:{r:.06525807,g:.57800001,b:.56867743},_envColorLeftBoost:{r:.81176478,g:.30588236,b:.30588236},_envColorRightBoost:{r:.27843139,g:.80000001,b:.44597632},_obstacleColor:{r:.15686275,g:.60392159,b:.60392159}},"Billie Eilish":{_colorLeft:{r:.80000001,g:.64481932,b:.43200001},_colorRight:{r:.54808509,g:.61276591,b:.63999999},_envColorLeft:{r:.81960785,g:.442,b:.184},_envColorRight:{r:.94117647,g:.70677096,b:.56470591},_obstacleColor:{r:.71325314,g:.56140977,b:.78301889},_envColorLeftBoost:{r:.80000001,g:0,b:0},_envColorRightBoost:{r:.55686277,g:.7019608,b:.77647066}},"Glass Desert":{_colorLeft:{r:.6792453,g:.5712628,b:0},_colorRight:{r:.7075472,g:0,b:.5364411},_envColorLeft:{r:.32222217,g:.6111111,b:.75},_envColorRight:{r:.03844783,g:.62239975,b:.90566039},_obstacleColor:{r:.06167676,g:.2869513,b:.3962264}},"New World":{_colorLeft:{r:.625,g:.625,b:.625},_colorRight:{r:.34375,g:.4375,b:.625},_envColorLeft:{r:.21875,g:.28125,b:.46875},_envColorRight:{r:.5,g:.5625,b:.78125},_obstacleColor:{r:.625,g:.59375,b:.8125}},"Girly Cupid":{_colorLeft:{r:1,g:.1875,b:.1875},_colorRight:{r:.375,g:.5625,b:.875},_envColorLeft:{r:.375,g:.375,b:.375},_envColorRight:{r:.625,g:.75,b:.875},_obstacleColor:{r:.75,g:.75,b:.75}},"T.R.Y Revolution":{_colorLeft:{r:1,g:0,b:.375},_colorRight:{r:.125,g:.375,b:.90625},_envColorLeft:{r:1,g:.125,b:.375},_envColorRight:{r:.1875,g:.5625,b:1},_obstacleColor:{r:.625,g:.625,b:.625}},Frightmare:{_colorLeft:{r:.8125,g:.125,b:.125},_colorRight:{r:.625,g:.625,b:.625},_envColorLeft:{r:.625,g:.03215,b:.03215},_envColorRight:{r:.71875,g:.71875,b:.71875},_obstacleColor:{r:.1875,g:.1875,b:.1875}},"Azure Raindrop":{_colorLeft:{r:.8125,g:.125,b:.125},_colorRight:{r:.0625,g:.5,b:.875},_envColorLeft:{r:.5625,g:.5625,b:.5625},_envColorRight:{r:.0625,g:.5,b:.875},_obstacleColor:{r:.75,g:.25,b:.75}},"werewolf howls.":{_colorLeft:{r:.812,g:.125,b:.125},_colorRight:{r:.25,g:.5,b:.75},_envColorLeft:{r:.875,g:.062,b:.062},_envColorRight:{r:.375,g:.375,b:.375},_envColorLeftBoost:{r:.938,g:.062,b:.062},_envColorRightBoost:{r:.938,g:.438,b:0},_obstacleColor:{r:.25,g:.25,b:.25}},VENTEN:{_colorLeft:{r:.8125,g:.625,b:.375},_colorRight:{r:.625,g:.375,b:.875},_envColorLeft:{r:.78125,g:.625,b:.1875},_envColorRight:{r:.09375,g:.4375,b:.6875},_envColorLeftBoost:{r:.875,g:.0625,b:.375},_envColorRightBoost:{r:.1875,g:.5,b:.875},_obstacleColor:{r:.125,g:.25,b:.4375}},"Unconscious Requiem":{_colorLeft:{r:.312,g:.312,b:.312},_colorRight:{r:.419,g:.625,b:.213},_envColorLeft:{r:.85,g:.085,b:.085},_envColorRight:{r:.604,g:.604,b:.604},_envColorLeftBoost:{r:.922,g:.596,b:.255},_envColorRightBoost:{r:.259,g:.784,b:.02},_obstacleColor:{r:.5,g:.5,b:.5}},"Pure-Hearted Armeria":{_colorLeft:{r:.25,g:.25,b:.25},_colorRight:{r:.625,g:.625,b:.625},_envColorLeft:{r:.25,g:.562,b:.312},_envColorRight:{r:.562,g:.562,b:.562},_obstacleColor:{r:.25,g:.5,b:.375},_envColorLeftBoost:{r:.625,g:.188,b:.188},_envColorRightBoost:{r:.125,g:.312,b:.688}}},y=function(){function e(e){void 0===e&&(e="Default Custom"),this._environmentColor=e,this._colorScheme={_colorLeft:null,_colorRight:null,_envColorLeft:null,_envColorRight:null,_envColorLeftBoost:null,_envColorRightBoost:null,_obstacleColor:null},this.update()}return Object.defineProperty(e.prototype,"colorScheme",{get:function(){return this._colorScheme},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"environmentColor",{get:function(){return this._environmentColor},set:function(e){this._environmentColor=e,this.update()},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(_[this._environmentColor])for(var e in this._colorScheme)this._colorScheme[e]=_[this._environmentColor][e]||null},e.prototype.getColorHex=function(e){return null==e?"#000000":this.rgbaToHex(e)},e.prototype.decToHex=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},e.prototype.hexToDec=function(e){return parseInt(e,16)},e.prototype.cDenorm=function(e){return e>1&&!(e<0)?255:t(255*e)},e.prototype.cNorm=function(e){return e/255},e.prototype.rgbaToHex=function(e){var t={r:null,g:null,b:null};for(var r in e)t[r]=this.cDenorm(e[r]);return"#"+this.decToHex(t.r)+this.decToHex(t.g)+this.decToHex(t.b)+(void 0!==t.a?this.decToHex(t.a):"")},e.prototype.hexToRGB=function(e){return{r:this.cNorm(this.hexToDec(e.slice(1,3))),g:this.cNorm(this.hexToDec(e.slice(3,5))),b:this.cNorm(this.hexToDec(e.slice(5,7)))}},e}();const S=y;var C={0:"noter.svg",1:"noteb.svg",2:"bomb.png",3:"noterd.svg",4:"notebd.svg",blank:"blank.png"},L={0:"",1:"deg180",2:"deg270",3:"deg90",4:"deg315",5:"deg45",6:"deg225",7:"deg135",8:""};const R=function(){function e(e,t){this._maxIndex=t,this._maxLayer=e}return Object.defineProperty(e.prototype,"column",{get:function(){return this._maxIndex},set:function(e){this._maxIndex=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"row",{get:function(){return this._maxLayer},set:function(e){this._maxLayer=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"limit",{get:function(){return this._limit},set:function(e){this._limit=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"total",{get:function(){return this._total},set:function(e){this._total=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noteRed",{get:function(){return this._noteRed},set:function(e){this._noteRed=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noteBlue",{get:function(){return this._noteBlue},set:function(e){this._noteBlue=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noteBomb",{get:function(){return this._noteBomb},set:function(e){this._noteBomb=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noDot",{get:function(){return this._noDot},set:function(e){this._noDot=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parity",{get:function(){return this._parity},set:function(e){this._parity=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parityExtend",{get:function(){return this._parityExtend},set:function(e){this._parityExtend=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parityRed",{get:function(){return this._parityRed},set:function(e){this._parityRed=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parityBlue",{get:function(){return this._parityBlue},set:function(e){this._parityBlue=e},enumerable:!1,configurable:!0}),e.prototype.createValidParity=function(e,t){void 0===e&&(e=0),void 0===t&&(t=!1);var r={0:{0:[6,1,7],1:[4,0,5],2:[0,1,2,3,4,5,6,7,8],3:[0,1,2,3,4,5,6,7,8]},1:{0:[6,1,7],1:[4,0,5],2:[0,1,2,3,4,5,6,7,8],3:[0,1,2,3,4,5,6,7,8]}};return t&&(r[0][0].push(8),r[0][1].push(8),r[1][0].push(8),r[1][1].push(8)),e>0&&(r[0][0].push(3),r[0][1].push(2),r[1][0].push(2),r[1][1].push(3)),e>1&&(r[0][0].push(5),r[0][1].push(6),r[1][0].push(4),r[1][1].push(7)),e>2&&(r[0][0].push(0,2),r[0][1].push(1,3),r[1][0].push(0,3),r[1][1].push(1,2)),r},e.prototype.generate=function(){var e=2,t=[this._noteRed,this._noteBlue,this._noteBomb],r={0:this._parityRed?0:1,1:this._parityBlue?0:1},o=this.createValidParity(this._parityExtend,!this._noDot),n=this._maxIndex*this._maxLayer;this._limit&&(e=Math.min(this._total,t.reduce((function(e,t){return e+t})),n)),this._limit||(e=Math.min(t.reduce((function(e,t){return e+t})),n));var i=new Array(n).fill(null);if(0===e)return i;for(var a=0;a<e;){for(var c=Math.floor(Math.random()*n),l=Math.floor(3*Math.random()),u=0;u<3;u++)0===t[l]&&(l=(l+1)%3);if(0===t[l])break;var s=Math.floor(9*Math.random());for(this._parity&&l<=1&&(s=o[l][r[l]][Math.floor(Math.random()*o[l][r[l]].length)]),u=0;u<n;u++){var p=(c+u)%n;if(null===i[p]){2===l&&(s=0),i[p]={_noteType:l,_noteDirection:s},t[l]--,a++;break}}}return i},e}();var j=function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},M=new i,x=new u(M,16),q=new c(M),E=new h(727),P=new g,B=new S,T=new R(3,4),D=new e,O=document.querySelectorAll(".text-version"),H=document.querySelectorAll(".text-watermark"),J=document.querySelector("#map-settings-input-bpm"),k=document.querySelectorAll(".toggle-input"),w=document.querySelector("#ebpm-input-precbeat"),F=document.querySelector("#ebpm-input-prectime"),N=document.querySelector("#ebpm-input-precrealtime"),I=document.querySelector("#ebpm-input-ebpm-ohj"),A=document.querySelector("#ebpm-input-ebpm-stream"),G=document.querySelector("#njs-input-njs"),K=document.querySelector("#njs-input-offset"),V=document.querySelector("#njs-input-hjd"),$=document.querySelector("#njs-input-jd"),z=document.querySelector("#njs-input-reacttime"),U=document.querySelector("#njs-output-jd"),W=document.querySelector("#njs-output-reacttime"),Y=document.querySelector("#njs-output-jd-optimal-high"),Q=document.querySelector("#njs-output-jd-optimal-low"),X=document.querySelector("#njs-option-njs-scale"),Z=document.querySelector("#score-input-note"),ee=document.querySelector("#score-input-star"),te=document.querySelector("#score-input-percent"),re=document.querySelector("#score-input-score"),oe=document.querySelector("#score-input-pp"),ne=document.querySelector("#score-output-maxscore"),ie=document.querySelector("#score-output-maxscore-modifier"),ae=document.querySelector("#score-input-avgcut"),ce=document.querySelector("#score-input-missed"),le=document.querySelector("#score-input-break"),ue=document.querySelector("#score-output-estscore"),se=document.querySelector("#score-output-estpercent"),pe=document.querySelector("#score-output-estpp"),he=document.querySelector("#score-output-missscore"),fe=document.querySelector("#score-output-nomissscore"),ge=document.querySelector("#score-output-nomisspercent"),de=document.querySelector("#score-output-nomisspp"),ve=document.querySelector("#score-table"),be=document.querySelector("#score-table-percentage"),me=document.querySelector("#score-option-pp-curve"),_e=document.querySelector("#score-text-json"),ye=document.querySelector("#score-error-json"),Se=document.querySelector("#label-input-text"),Ce=document.querySelector("#label-output-text"),Le=document.querySelector("#label-input-diff-count-1"),Re=document.querySelector("#label-input-diff-count-2"),je=document.querySelector("#label-input-diff-count-3"),Me=document.querySelector("#label-input-diff-count-4"),xe=document.querySelector("#label-input-diff-count-5"),qe={},Ee={};for(var Pe in P.difficulty)qe[Pe]=document.querySelector("#sps-input-"+Pe),Ee[Pe]=document.querySelector("#sps-output-"+Pe);var Be=document.querySelector("#sps-output-total-reduction"),Te=document.querySelector("#cp-option-colorscheme"),De={},Oe={},He={},Je={};for(var ke in B.colorScheme){var we=ke.replace(/^\_/,"").toLowerCase();De[ke]=document.querySelector("#cp-input-hex-"+we),Oe[ke]=document.querySelector("#cp-input-picker-"+we),He[ke]=document.querySelector("#cp-input-include-"+we),Je[ke]=document.querySelector("#cp-input-reset-"+we)}var Fe=document.querySelector("#cp-output-de-nc"),Ne=document.querySelector("#cp-output-de-la"),Ie=document.querySelector("#cp-output-de-ra"),Ae=document.querySelector("#cp-io-colorjson"),Ge=document.querySelector("#cp-error-colorjson"),Ke=document.querySelector("#rpg-input-rpattern-row"),Ve=document.querySelector("#rpg-input-rpattern-column"),$e=document.querySelector("#rpg-table-rpattern"),ze=document.querySelector("#rpg-input-rpattern-red"),Ue=document.querySelector("#rpg-input-rpattern-blue"),We=document.querySelector("#rpg-input-rpattern-bomb"),Ye=document.querySelector("#rpg-input-rpattern-limit"),Qe=document.querySelector("#rpg-input-rpattern-total"),Xe=document.querySelector("#rpg-input-rpattern-nodot"),Ze=document.querySelector("#rpg-input-rpattern-parity"),et=document.querySelector("#rpg-input-rpattern-parity-extend"),tt=document.querySelector("#rpg-input-rpattern-parity-red"),rt=document.querySelector("#rpg-input-rpattern-parity-blue"),ot=document.querySelector("#rpg-input-generate-rpattern");for(var Pe in function(){var e;e=D.number,O.forEach((function(t){t.textContent=e})),function(e){H.forEach((function(t){t.textContent=e}))}(D.watermark),J.value=M.value.toString(),gt(),ft(),G.value=x.njs.toString(),K.value=x.offset.toString(),yt(),W.textContent=t(60/M.value*x.hjdMin*1e3)+"ms",ct(),be.value=[100,98,97,96,95,94,93,90,85,80].join(","),Z.value=E.note.toString(),ee.value=E.star.toString(),te.value="90",ae.value="111",ce.value=[3,22,100,102].join(","),le.value=[127].join(","),s.custom=j([],s.scoresaber,!0),xt(),qt(),Et(),Pt(),Ke.value=T.row.toString(),Ve.value=T.column.toString(),ze.value="1",Ue.value="1",We.value="0",Qe.value="2",et.value="0",Ft()}(),J.addEventListener("change",lt),J.addEventListener("input",lt),w.addEventListener("change",ut),w.addEventListener("input",ut),F.addEventListener("change",st),F.addEventListener("input",st),N.addEventListener("change",pt),N.addEventListener("input",pt),I.addEventListener("change",ht),I.addEventListener("input",ht),A.addEventListener("change",ht),A.addEventListener("input",ht),G.addEventListener("change",dt),G.addEventListener("input",dt),K.addEventListener("change",vt),K.addEventListener("input",vt),V.addEventListener("change",bt),V.addEventListener("input",bt),$.addEventListener("change",mt),$.addEventListener("input",mt),z.addEventListener("change",_t),z.addEventListener("input",_t),Z.addEventListener("change",St),Z.addEventListener("input",St),ee.addEventListener("change",Ct),ee.addEventListener("input",Ct),te.addEventListener("change",Lt),te.addEventListener("input",Lt),re.addEventListener("change",Rt),re.addEventListener("input",Rt),ae.addEventListener("change",jt),ae.addEventListener("input",jt),le.addEventListener("change",Mt),ce.addEventListener("change",Mt),be.addEventListener("change",(function(e){var t=this.value.trim().replace(/\s+,/,",");if(/^((\d+\.)?\d+,?)+/.test(t)){var r=t.split(",").map((function(e){return parseFloat(e)})).filter((function(e){return!isNaN(e)})).sort((function(e,t){return t-e}));this.value=r.toString(),Et()}})),me.addEventListener("change",(function(){E.curvePoints=s[this.value],_e.disabled=!0,"custom"===this.value&&(_e.disabled=!1),xt(),qt(),Et(),Pt()})),_e.addEventListener("change",(function(){var e={};Ge.innerHTML="";try{e=/^{/.test(this.value.trim())?JSON.parse(this.value.trim()):JSON.parse("{"+this.value.trim().replace(/\,$/,"")+"}"),E.curvePoints=e.curvePoints,s.custom=e.curvePoints}catch(e){console.error(e),ye.innerHTML=e+"<br>"}xt(),qt(),Et(),Pt()})),Se.addEventListener("input",(function(e){""!==this.value.trim()?Ce.textContent=this.value.trim():Ce.textContent="none"})),Le.addEventListener("click",Tt),Re.addEventListener("click",Tt),je.addEventListener("click",Tt),Me.addEventListener("click",Tt),xe.addEventListener("click",Tt),P.difficulty)qe[Pe].addEventListener("input",Bt);for(var ke in Te.addEventListener("change",(function(){if(this.value!==nt){for(var e in B.colorScheme)De[e].value="",Oe[e].value="#000000",He[e].checked=!1,Je[e].style.display="none";for(var e in B.environmentColor=this.value,B.colorScheme)if(B.colorScheme[e]){var t=B.getColorHex(B.colorScheme[e]);De[e].value=t,Oe[e].value=t,He[e].checked=!!B.colorScheme[e],Je[e].style.display="block"}Dt(),Ot()}})),B.colorScheme)De[ke].addEventListener("change",Ht),Oe[ke].addEventListener("change",Jt),He[ke].addEventListener("click",kt),Je[ke].addEventListener("click",wt),Je[ke].style.display="none";var nt="Custom",it=document.createElement("option");for(var at in it.value=nt,it.textContent=nt,Te.append(it),_)(it=document.createElement("option")).value=at,it.textContent=at,Te.append(it);function ct(){k.forEach((function(e){e.disabled=!1}))}function lt(e){M.value=Math.abs(parseFloat(this.value))||0,M.value>0?(q.update(),ct(),ft(),gt(),yt(),W.textContent=t(60/M.value*x.hjdMin*1e3)+"ms"):k.forEach((function(e){e.disabled=!0})),"change"===e.type&&(this.value=M.value)}function ut(e){q.precBeat=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):1,q.precBeat>0&&(gt(),F.value=t(q.precTime,3).toString(),N.value=t(q.precRealTime,1).toString()),"change"===e.type&&(this.value=t(q.precBeat,3).toString())}function st(e){q.precTime=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):1,q.precTime>0&&(gt(),w.value=t(q.precBeat,3).toString(),N.value=t(q.precRealTime,1).toString()),"change"===e.type&&(this.value=t(q.precTime,3).toString())}function pt(e){q.precRealTime=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):1,q.precRealTime>0&&(gt(),w.value=t(q.precBeat,3).toString(),F.value=t(q.precTime,3).toString()),"change"===e.type&&(N.value=t(q.precRealTime,1).toString())}function ht(e){"ebpm-input-ebpm-ohj"===this.id&&(q.ebpmOHJ=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):M.value,"change"===e.type&&(this.value=t(q.ebpmOHJ,2).toString()),A.value=t(q.ebpmStream,2).toString()),"ebpm-input-ebpm-stream"===this.id&&(q.ebpmStream=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):M.value,"change"===e.type&&(this.value=t(q.ebpmStream,2).toString()),I.value=t(q.ebpmOHJ,2).toString()),ft()}function ft(){w.value=t(q.precBeat,3).toString(),F.value=t(q.precTime,3).toString(),N.value=t(q.precRealTime,1).toString()}function gt(){I.value=t(q.ebpmOHJ,2).toString(),A.value=t(q.ebpmStream,2).toString()}function dt(e){x.njs=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):x.njs,yt(),"change"===e.type&&(this.value=t(x.njs,3))}function vt(e){x.offset=parseFloat(this.value)||0,yt(),"change"===e.type&&(this.value=t(x.offset,3))}function bt(e){x.offset=Math.max(Math.abs(parseFloat(this.value)),x.hjdMin)-x.calcHalfJumpDurationRaw(),K.value=t(x.offset,3).toString(),$.value=t(x.jd,3).toString(),z.value=t(1e3*x.reactTime).toString(),U.textContent=t(x.jdMin,2).toString(),"change"===e.type&&(this.value=t(x.hjd,3).toString())}function mt(e){var r=Math.abs(parseFloat(this.value))>0?Math.abs(parseFloat(this.value)):x.jd;"hjd"===X.value&&(r=Math.max(r,x.jdMin),x.offset=x.calcHalfJumpDurationFromJD(r)-x.calcHalfJumpDurationRaw()),"njs"===X.value&&(x.njs=r/(2*x.calcReactionTimeHJD())),V.value=t(x.hjd,3).toString(),z.value=t(1e3*x.reactTime).toString(),U.textContent=t(x.jdMin,2).toString(),G.value=t(x.njs,3).toString(),K.value=t(x.offset,3).toString(),"change"===e.type&&(this.value=t(x.jd,2).toString())}function _t(e){var r=Math.max(Math.abs(parseFloat(this.value))/1e3>0?Math.abs(parseFloat(this.value))/1e3:x.calcReactionTimeHJD(),x.calcReactionTimeHJD(x.hjdMin));x.offset=r/(60/M.value)-x.calcHalfJumpDurationRaw(),V.value=t(x.hjd,3).toString(),$.value=t(x.jd,2).toString(),U.textContent=t(x.jdMin,2).toString(),K.value=t(x.offset,3).toString(),"change"===e.type&&(this.value=t(1e3*x.reactTime).toString())}function yt(){x.update(),V.value=t(x.hjd,3).toString(),$.value=t(x.jd,2).toString(),z.value=t(1e3*x.reactTime).toString(),Y.textContent=t(x.calcJumpDistanceOptimalHigh(),2).toString(),Q.textContent=t(x.calcJumpDistanceOptimalLow(),2).toString(),U.textContent=t(x.jdMin,2).toString()}function St(e){E.note=parseInt(this.value)||0,xt(),qt(),Et(),"change"===e.type&&(this.value=E.note.toString())}function Ct(e){E.star=parseFloat(this.value)||0,xt(),qt(),Et(),"change"===e.type&&(this.value=t(E.star,2).toString())}function Lt(e){xt(),Et(),"change"===e.type&&(this.value=t(parseFloat(this.value),2).toString())}function Rt(e){var r=parseInt(this.value),o=E.calcScore();te.value=t(r/o*100,2).toString(),oe.value=t(E.calcPP(E.star,parseFloat(te.value)/100),2).toString(),"change"===e.type&&(this.value=r.toString())}function jt(e){qt(),"change"===e.type&&(this.value=t(parseFloat(this.value),2).toString())}function Mt(e){var t=this.value.trim().replace(/\s+,/,",");if(/^((\d+\.)?\d+,?)+/.test(t)||""===t){var r=t.split(",").map((function(e){return parseInt(e)})).filter((function(e){return!isNaN(e)})).sort((function(e,t){return e-t}));this.value=r.join(",").toString(),qt()}}function xt(){re.value=t(E.calcScore()*(parseFloat(te.value)/100)).toString(),oe.value=t(E.calcPP(E.star,parseFloat(te.value)/100),2).toString(),ne.textContent=r(E.calcScore()),ie.textContent=r(E.calcScore())}function qt(){var e=ce.value.split(",").map((function(e){return parseInt(e)}))||[],o=le.value.split(",").map((function(e){return parseInt(e)}))||[],n=E.calcScore(),i=E.calcScore(parseFloat(ae.value),void 0,e,o),a=E.calcScore(parseFloat(ae.value));ue.textContent=r(t(i)),se.textContent=t(i/n*100,2).toString(),pe.textContent=t(E.calcPP(E.star,i/n),2).toString(),he.textContent=r(t(a-i)),fe.textContent=r(t(a)),ge.textContent=t(a/n*100,2).toString(),de.textContent=t(E.calcPP(E.star,a/n),2).toString()}function Et(){ve.innerHTML="<tr><th>Percentage</th><th>Score</th><th>PP</th></tr>";for(var e=be.value.split(",").map((function(e){return parseFloat(e)})),o=0;o<e.length;o++){var n=document.createElement("tr"),i=document.createElement("td"),a=document.createElement("td"),c=document.createElement("td");i.textContent=t(e[o],2).toString(),a.textContent=r(t(E.calcScore()*(e[o]/100))),c.textContent=t(E.calcPP(E.star,e[o]/100),2).toString(),n.appendChild(i),n.appendChild(a),n.appendChild(c),ve.appendChild(n)}}function Pt(){var e={curvePoints:j([],E.curvePoints,!0).reverse()};_e.value=JSON.stringify(e,null,4)}function Bt(e){var r=this.id.slice(10);P.difficulty[r]=this.value?Math.abs(parseFloat(this.value.trim())):null;var o=null;for(var n in P.difficulty)null!==P.difficulty[n]&&(null!==o&&(Ee[o].textContent=(0!==P.difficulty[n]?P.calcDifference(n,o).toFixed(2):"Infinity")+"%"),o=n),Ee[n].textContent="";Be.textContent=P.getTotalReduction().toFixed(2)+"%","change"===e.type&&null!==P.difficulty[r]&&(this.value=t(P.difficulty[r],2).toString())}function Tt(e){Ce.className="diff-label diff-count-"+parseInt(this.value)}function Dt(){var e=B.colorScheme._colorLeft,r=B.colorScheme._colorRight,o=[1,1,1];Ne.textContent=e?t(m(d(e),o),2).toString():"N/A",Ie.textContent=r?t(m(d(r),o),2).toString():"N/A",Fe.textContent=e&&r?t(m(d(e),d(r)),2).toString():"N/A"}function Ot(){var e={};for(var t in B.colorScheme)He[t].checked&&(e[t]=B.colorScheme[t]);Ae.value=JSON.stringify(e,null,4)}function Ht(){if(/^\#?[0-9a-fA-F]{6,8}/.test(this.value.trim())){var e="_"+this.id.slice(13);for(var t in B.colorScheme)e===t.toLowerCase()&&(e=t);var r=this.value.trim().replace(/^\#?/,"#").slice(0,7);B.colorScheme[e]=B.hexToRGB(r),De[e].value=r,Oe[e].value=r,He[e].checked=!0,Je[e].style.display="block",Dt(),Ot()}}function Jt(){var e="_"+this.id.slice(16);for(var t in B.colorScheme)e===t.toLowerCase()&&(e=t);B.colorScheme[e]=B.hexToRGB(this.value),De[e].value=this.value,He[e].checked=!0,Je[e].style.display="block",Dt(),Ot()}function kt(){var e="_"+this.id.slice(17);for(var t in B.colorScheme)e===t.toLowerCase()&&(e=t);this.checked&&(B.colorScheme[e]=B.hexToRGB(Oe[e].value),De[e].value=Oe[e].value,Je[e].style.display="block"),Dt(),Ot()}function wt(){var e="_"+this.id.slice(15);for(var t in B.colorScheme)e===t.toLowerCase()&&(e=t);B.colorScheme[e]=null,De[e].value="",Oe[e].value="#000000",He[e].checked=!1,Je[e].style.display="none",Dt(),Ot()}function Ft(){$e.innerHTML="";for(var e=0;e<T.row;e++){for(var t=document.createElement("tr"),r=0;r<T.column;r++){var o=document.createElement("td");o.className="table-grid";var n=document.createElement("img");n.className="table-rpattern-image",n.src="./assets/"+C.blank,n.alt=C.blank.slice(0,-4),o.appendChild(n),t.appendChild(o)}$e.appendChild(t)}}Ae.addEventListener("change",(function(){for(var e in B.colorScheme)De[e].value="",Oe[e].value="#000000",He[e].checked=!1,Je[e].style.display="none";Ge.innerHTML="";var t=["_colorLeft","_colorRight","_envColorLeft","_envColorRight","_envColorLeftBoost","_envColorRightBoost","_obstacleColor"],r={};try{r=/^{/.test(this.value.trim())?JSON.parse(this.value.trim()):JSON.parse("{"+this.value.trim().replace(/\,$/,"")+"}")}catch(e){console.error(e),Ge.innerHTML=e+"<br>"}for(var e in r)if(t.includes(e)){B.colorScheme[e]=r[e];var o=B.getColorHex(r[e]);De[e].value=o,Oe[e].value=o,He[e].checked=!0,Je[e].style.display="block"}Dt(),Ot()})),Ke.addEventListener("click",(function(){var e=Math.min(Math.abs(parseFloat(this.value))||1,4);this.value=e,T.row=e,Ft()})),Ve.addEventListener("click",(function(){var e=Math.min(Math.abs(parseFloat(this.value))||1,8);this.value=e,T.column=e,Ft()})),ot.addEventListener("click",(function(){var e=document.querySelectorAll(".table-rpattern-image");e.forEach((function(e){e.src="./assets/blank.png",e.alt="blank",e.className="table-rpattern-image"})),T.noteRed=parseInt(ze.value)||0,T.noteBlue=parseInt(Ue.value)||0,T.noteBomb=parseInt(We.value)||0,T.noDot=Xe.checked,T.limit=Ye.checked,T.total=parseInt(Qe.value)||0,T.parity=Ze.checked,T.parityExtend=parseInt(et.value)||0,T.parityRed=tt.checked,T.parityBlue=rt.checked;for(var t=T.generate(),r=0;r<t.length;r++)null!==t[r]&&(e[r].src="./assets/"+(8!==t[r]._noteDirection||Xe.checked?C[t[r]._noteType]:C[t[r]._noteType+3]),e[r].alt=C[t[r]._noteType].slice(0,-4),8!==t[r]._noteDirection&&(e[r].className+=" "+L[t[r]._noteDirection],e[r].alt+=" "+L[t[r]._noteDirection]))}))})();